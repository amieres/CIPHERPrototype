(function(){"use strict";var B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ;var a=alert,b=confirm,c=prompt,d=setTimeout,e=setInterval,f=clearTimeout,g=clearInterval,h=IntelliFactory,i=console,j=requestAnimationFrame,k=cancelAnimationFrame,l=JSON,m=Array,n=XMLHttpRequest,o=document,p=RegExp,q=Error,r=String,s=Date,t=jQuery,u=Function,v=Number,w=isNaN,x=Math,y=id,z=Infinity,A=NaN;B=window.WebSharper=window.WebSharper||{};C=B.JavaScript=B.JavaScript||{};D=C.JSModule=C.JSModule||{};E=B.Collections=B.Collections||{};F=E.EqualityComparer=E.EqualityComparer||{};G=B.MacroModule=B.MacroModule||{};H=G.EquatableEqualityComparer=G.EquatableEqualityComparer||{};I=G.BaseEqualityComparer=G.BaseEqualityComparer||{};J=E.Comparer=E.Comparer||{};K=G.ComparableComparer=G.ComparableComparer||{};L=G.BaseComparer=G.BaseComparer||{};M=C.Pervasives=C.Pervasives||{};N=B.Json=B.Json||{};O=B.Remoting=B.Remoting||{};P=O.XhrProvider=O.XhrProvider||{};Q=O.AjaxRemotingProvider=O.AjaxRemotingProvider||{};R=window.StartupCode$WebSharper_Main$Remoting=window.StartupCode$WebSharper_Main$Remoting||{};S=B.PrintfHelpers=B.PrintfHelpers||{};T=B.Concurrency=B.Concurrency||{};U=T.Scheduler=T.Scheduler||{};V=window.StartupCode$WebSharper_Main$Concurrency=window.StartupCode$WebSharper_Main$Concurrency||{};W=B.Enumerator=B.Enumerator||{};X=W.T=W.T||{};Y=B.HtmlContentExtensions=B.HtmlContentExtensions||{};Z=Y.SingleNode=Y.SingleNode||{};_0=B.Activator=B.Activator||{};_1=C.Optional=C.Optional||{};_2=B.Arrays=B.Arrays||{};_3=B.Seq=B.Seq||{};_4=B.List=B.List||{};_5=B.Arrays2D=B.Arrays2D||{};_6=B.CancellationTokenSource=B.CancellationTokenSource||{};_7=B.Char=B.Char||{};_8=B.Util=B.Util||{};_9=B.DateUtil=B.DateUtil||{};_=B.DateTimeOffset=B.DateTimeOffset||{};$=B.Delegate=B.Delegate||{};ba=E.DictionaryUtil=E.DictionaryUtil||{};bb=E.KeyCollection=E.KeyCollection||{};bc=E.ValueCollection=E.ValueCollection||{};bd=E.Dictionary=E.Dictionary||{};be=B.MatchFailureException=B.MatchFailureException||{};bf=B.IndexOutOfRangeException=B.IndexOutOfRangeException||{};bg=B.OperationCanceledException=B.OperationCanceledException||{};bh=B.ArgumentException=B.ArgumentException||{};bi=B.ArgumentOutOfRangeException=B.ArgumentOutOfRangeException||{};bj=B.InvalidOperationException=B.InvalidOperationException||{};bk=B.AggregateException=B.AggregateException||{};bl=B.TimeoutException=B.TimeoutException||{};bm=B.FormatException=B.FormatException||{};bn=B.OverflowException=B.OverflowException||{};bo=B.Guid=B.Guid||{};bp=E.HashSetUtil=E.HashSetUtil||{};bq=E.HashSet=E.HashSet||{};br=B.Lazy=B.Lazy||{};bs=_4.T=_4.T||{};bt=B.Nullable=B.Nullable||{};bu=B.Operators=B.Operators||{};bv=B.Slice=B.Slice||{};bw=B.Option=B.Option||{};bx=B.Queue=B.Queue||{};by=B.Random=B.Random||{};bz=B.Ref=B.Ref||{};bA=B.Result=B.Result||{};bB=B.Control=B.Control||{};bC=B.Stack=B.Stack||{};bD=B.Strings=B.Strings||{};bE=B.Task=B.Task||{};bF=B.Task1=B.Task1||{};bG=B.TaskCompletionSource=B.TaskCompletionSource||{};bH=B.Unchecked=B.Unchecked||{};bI=B.Numeric=B.Numeric||{};bJ=h&&h.Runtime;D.GetFieldValues=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push(bK[bN]);return bL;};D.GetFieldNames=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push(bN);return bL;};D.GetFields=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push([bN,bK[bN]]);return bL;};F=E.EqualityComparer=bJ.Class({CGetHashCode0:function(bK){return this.GetHashCode(bK);},CEquals0:function(bK,bL){return this.Equals(bK,bL);},CGetHashCode:function(bK){return this.GetHashCode(bK);},CEquals:function(bK,bL){return this.Equals(bK,bL);}},null,F);F.New=bJ.Ctor(function(){},F);H=G.EquatableEqualityComparer=bJ.Class({GetHashCode:function(bK){return bH.Hash(bK);},Equals:function(bK,bL){return bK.EEquals(bL);}},F,H);H.New=bJ.Ctor(function(){F.New.call(this);},H);I=G.BaseEqualityComparer=bJ.Class({GetHashCode:function(bK){return bH.Hash(bK);},Equals:function(bK,bL){return bH.Equals(bK,bL);}},F,I);I.New=bJ.Ctor(function(){F.New.call(this);},I);J=E.Comparer=bJ.Class({Compare0:function(bK,bL){return this.Compare$1(bK,bL);},Compare:function(bK,bL){return this.Compare$1(bK,bL);}},null,J);J.New=bJ.Ctor(function(){},J);K=G.ComparableComparer=bJ.Class({Compare$1:function(bK,bL){return bK.CompareTo(bL);}},J,K);K.New=bJ.Ctor(function(){J.New.call(this);},K);L=G.BaseComparer=bJ.Class({Compare$1:function(bK,bL){return bH.Compare(bK,bL);}},J,L);L.New=bJ.Ctor(function(){J.New.call(this);},L);M.GetJS=function(bK,bL){var bM,bN;bM=bK;bN=W.Get(bL);try{while(bN.MoveNext())bM=bM[bN.Current()];}finally{if("Dispose"in bN)bN.Dispose();}return bM;};M.NewFromSeq=function(bK){var bL,bM,bN;bL={};bM=W.Get(bK);try{while(bM.MoveNext()){bN=bM.Current();bL[bN[0]]=bN[1];}}finally{if("Dispose"in bM)bM.Dispose();}return bL;};N.Activate=function(bK){var bM,bN,bO;function bL(bP){var bQ,bR,bS,bT,bU;if(bH.Equals(bP,null))return bP;else if(typeof bP=="object"){if(bP instanceof m)return N.shallowMap(bL,bP);else{bQ=N.shallowMap(bL,bP.$V);bR=bP.$T;if(bH.Equals(typeof bR,"undefined"))return bQ;else{bS=_2.get(bM,bR);if(bS===window.WebSharper.List.T)return _4.ofArray(bQ);else{bT=new(_2.get(bM,bR))();for(var bV in bQ)if(function(bW){bT[bW]=bQ[bW];return false;}(bV))break;return bT;}}}}else return bP;}bM=bK.$TYPES;for(bN=0,bO=_2.length(bM)-1;bN<=bO;bN++)_2.set(bM,bN,N.lookup(_2.get(bM,bN)));return bL(bK.$DATA);};N.shallowMap=function(bK,bL){var bM,bN;if(bL instanceof m)return _2.map(bK,bL);else if(typeof bL=="object"){bM={};for(var bO in bL)if(function(bP){bM[bP]=bK(bL[bP]);return false;}(bO))break;return bM;}else return bL;};N.lookup=function(bK){var bL,bM,bN,bO,bP;bN=_2.length(bK);bL=window;bM=0;while(bM<bN){bO=_2.get(bK,bM);bP=bL[bO];!bH.Equals(typeof bP,void 0)?(bL=bP,bM=bM+1):bu.FailWith("Invalid server reply. Failed to find type: "+bO);}return bL;};P=O.XhrProvider=bJ.Class({Sync:function(bK,bL,bM){var bN;bN=[null];O.ajax(false,bK,bL,bM,function(bO){bN[0]=bO;},function(bO){throw bO;},function(){O.ajax(false,bK,bL,bM,function(bO){bN[0]=bO;},function(bO){throw bO;},void 0);});return bN[0];},Async:function(bK,bL,bM,bN,bO){O.ajax(true,bK,bL,bM,bN,bO,function(){O.ajax(true,bK,bL,bM,bN,bO,void 0);});}},null,P);P.New=bJ.Ctor(function(){},P);Q=O.AjaxRemotingProvider=bJ.Class({get_EndPoint:function(){return O.EndPoint();},AsyncBase:function(bK,bL){var bM,bN;bM=this;bN=null;return T.Delay(function(){var bO,bP;bO=O.makeHeaders(bK);bP=O.makePayload(bL);return T.Bind(T.GetCT(),function(bQ){return T.FromContinuations(function(bR,bS,bT){var bU,bV,bW,bX;bU=[true];bV=(bW=function(){return bU[0]?(bU[0]=false,bT(new bg.New(bQ))):null;},T.Register(bQ,function(){bW();}));bX=bM.get_EndPoint();return O.AjaxProvider().Async(bX,bO,bP,function(bY){if(bU[0]){bU[0]=false;bV.Dispose();bR(N.Activate(l.parse(bY)));}},function(bY){if(bU[0]){bU[0]=false;bV.Dispose();bS(bY);}});});});});},Send:function(bK,bL){T.Start(this.AsyncBase(bK,bL),null);},Task:function(bK,bL){return T.StartAsTask(this.AsyncBase(bK,bL),null);},Async:function(bK,bL){return this.AsyncBase(bK,bL);},Sync:function(bK,bL){var bM,bN,bO;return N.Activate(l.parse((bM=this.get_EndPoint(),(bN=O.makeHeaders(bK),(bO=O.makePayload(bL),O.AjaxProvider().Sync(bM,bN,bO))))));}},null,Q);Q.New=bJ.Ctor(function(){},Q);O.ajax=function(bK,bL,bM,bN,bO,bP,bQ){var bR,bS,bT;bR=new n();bS=o.cookie.replace(new p("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bR.open("POST",bL,bK);if(bK==true)bR.withCredentials=true;for(var bV in bM)bR.setRequestHeader(bV,bM[bV]);if(bS)bR.setRequestHeader("x-csrftoken",bS);function bU(){var bW;if(bR.status==200)bO(bR.responseText);else if(bQ&&bR.status==403&&bR.responseText=="CSRF")bQ();else{bW="Response status is not 200: ";bP(new q(bW+bR.status));}}if("onload"in bR)bR.onload=bR.onerror=bR.onabort=bU;else bR.onreadystatechange=function(){if(bR.readyState==4)bU();};bR.send(bN);};O.makePayload=function(bK){return l.stringify(bK);};O.makeHeaders=function(bK){return{"content-type":"application/json","x-websharper-rpc":bK};};O.AjaxProvider=function(){R.$cctor();return R.AjaxProvider;};O.set_AjaxProvider=function(bK){R.$cctor();R.AjaxProvider=bK;};O.UseHttps=function(){try{return!bD.StartsWith(window.location.href,"https://")&&(O.set_EndPoint(bD.Replace(window.location.href,"http://","https://")),true);}catch(bK){return false;}};O.EndPoint=function(){R.$cctor();return R.EndPoint;};O.set_EndPoint=function(bK){R.$cctor();R.EndPoint=bK;};R.$cctor=bJ.Cctor(function(){R.EndPoint="?";R.AjaxProvider=new P.New();R.$cctor=window.ignore;});S.prettyPrint=function(bK){var bL,bM,bN;return bK===null?"null":(bL=typeof bK,bL=="string"?"\""+bK+"\"":bL=="object"?bK instanceof m?"[|"+bD.concat("; ",_2.map(S.prettyPrint,bK))+"|]":(bM=r(bK),bM==="[object Object]"?"{"+bD.concat("; ",(bN=function(bO,bP){return bO+" = "+S.prettyPrint(bP);},_2.map(function(bO){return bN(bO[0],bO[1]);},D.GetFields(bK))))+"}":bM):r(bK));};S.printArray2D=function(bK,bL){return bL===null?"null":"[["+bD.concat("][",_3.delay(function(){var bM;bM=bL.length?bL[0].length:0;return _3.map(function(bN){return bD.concat("; ",_3.delay(function(){return _3.map(function(bO){return bK(_2.get2D(bL,bN,bO));},bu.range(0,bM-1));}));},bu.range(0,bL.length-1));}))+"]]";};S.printArray=function(bK,bL){return bL===null?"null":"[|"+bD.concat("; ",_2.map(bK,bL))+"|]";};S.printList=function(bK,bL){return"["+bD.concat("; ",_3.map(bK,bL))+"]";};S.padNumLeft=function(bK,bL){var bM;bM=_2.get(bK,0);return bM===" "||bM==="+"||bM==="-"?bM+bD.PadLeftWith(bK.substr(1),bL-1,48):bD.PadLeftWith(bK,bL,48);};S.spaceForPos=function(bK,bL){return 0<=bK?" "+bL:bL;};S.plusForPos=function(bK,bL){return 0<=bK?"+"+bL:bL;};S.toSafe=function(bK){return bK==null?"":bK;};U=T.Scheduler=bJ.Class({tick:function(){var bK,bL,bM;bL=this;bM=s.now();bK=true;while(bK)if(this.robin.length===0){this.idle=true;bK=false;}else{(this.robin.shift())();s.now()-bM>40?(d(function(){bL.tick();},0),bK=false):void 0;}},Fork:function(bK){var bL;bL=this;this.robin.push(bK);this.idle?(this.idle=false,d(function(){bL.tick();},0)):void 0;}},null,U);U.New=bJ.Ctor(function(){this.idle=true;this.robin=[];},U);T.For=function(bK,bL){return T.Using(W.Get(bK),function(bM){return T.While(function(){return bM.MoveNext();},T.Delay(function(){return bL(bM.Current());}));});};T.While=function(bK,bL){return bK()?T.Bind(bL,function(){return T.While(bK,bL);}):T.Return();};T.Using=function(bK,bL){return T.TryFinally(bL(bK),function(){bK.Dispose();});};T.TryCancelled=function(bK,bL){return function(bM){bK({k:function(bN){if(bN.$==2){bL(bN.$0);bM.k(bN);}else bM.k(bN);},ct:bM.ct});};};T.OnCancel=function(bK){return function(bL){bL.k({$:0,$0:T.Register(bL.ct,bK)});};};T.StartChild=function(bK,bL){return function(bM){var bN,bO,bP,bQ;bN=[true];bO=[null];bP=[];bQ=bL!=null&&bL.$==1?{$:1,$0:d(function(){var bR;bN[0]=false;bR={$:1,$0:new bl.New()};while(bP.length>0)(bP.shift())(bR);},bL.$0)}:null;T.scheduler().Fork(function(){if(!bM.ct.c)bK({k:function(bR){if(bN[0]){bO[0]={$:1,$0:bR};bQ!=null&&bQ.$==1?f(bQ.$0):void 0;while(bP.length>0)(bP.shift())(bR);}},ct:bM.ct});});bM.k({$:0,$0:function(bR){var bS;if(bN[0]){bS=bO[0];bS==null?bP.push(bR.k):bR.k(bS.$0);}else bR.k({$:1,$0:new bl.New()});}});};};T.Parallel=function(bK){var bL;bL=_2.ofSeq(bK);return _2.length(bL)===0?T.Return([]):function(bM){var bN,bO,bP,bQ;bN=bL.length;bO=[bN];bP=new m(bN);bQ=function(bR,bS){var bT,bU;bU=bO[0];switch(bU===0?0:bU===1?bS.$==0?1:(bT=[bU,bS],3):bS.$==0?2:(bT=[bU,bS],3)){case 0:return null;break;case 1:_2.set(bP,bR,bS.$0);bO[0]=0;return bM.k({$:0,$0:bP});break;case 2:_2.set(bP,bR,bS.$0);bO[0]=bU-1;break;case 3:bO[0]=0;return bM.k(bT[1]);break;}};_2.iteri(function(bR,bS){return T.scheduler().Fork(function(){bS({k:function(bT){return bQ(bR,bT);},ct:bM.ct});});},bL);};};T.Sleep=function(bK){return function(bL){var bM,bN;bM=void 0;bN=void 0;bM=d(function(){bN.Dispose();T.scheduler().Fork(function(){bL.k({$:0,$0:null});});},bK);bN=T.Register(bL.ct,function(){f(bM);T.scheduler().Fork(function(){T.cancel(bL);});});};};T.StartAsTask=function(bK,bL){var bM;bM=new bG.New();T.StartWithContinuations(bK,function(bN){bM.SetResult(bN);},function(bN){bM.SetException$1(bN);},function(){bM.SetCanceled();},bL);return bM.get_Task();};T.AwaitTask1=function(bK){return T.FromContinuations(function(bL,bM,bN){bH.Equals(bK.get_Status(),0)?bK.Start():void 0;bK.ContinueWith$2(function(bO){return bO.get_IsCanceled()?bN(new bg.New(T.noneCT())):bO.get_IsFaulted()?bM(bO.get_Exception()):bL(bO.get_Result());});});};T.AwaitTask=function(bK){return T.FromContinuations(function(bL,bM,bN){bH.Equals(bK.get_Status(),0)?bK.Start():void 0;bK.ContinueWith$2(function(bO){return bO.get_IsCanceled()?bN(new bg.New(T.noneCT())):bO.get_IsFaulted()?bM(bO.get_Exception()):bL();});});};T.AwaitEvent=function(bK,bL){return function(bM){var bN,bO;bN=void 0;bO=void 0;bN=bK.Subscribe(_8.observer(function(bP){bN.Dispose();bO.Dispose();T.scheduler().Fork(function(){bM.k({$:0,$0:bP});});}));bO=T.Register(bM.ct,function(){if(bL!=null&&bL.$==1)bL.$0();else{bN.Dispose();T.scheduler().Fork(function(){T.cancel(bM);});}});};};T.StartImmediate=function(bK,bL){var bM,bN;bM=(bN=(T.defCTS())[0],bL==null?bN:bL.$0);!bM.c?bK({k:function(bO){if(bO.$==1)T.UncaughtAsyncError(bO.$0);},ct:bM}):void 0;};T.Start=function(bK,bL){var bM,bN;bM=(bN=(T.defCTS())[0],bL==null?bN:bL.$0);T.scheduler().Fork(function(){if(!bM.c)bK({k:function(bO){if(bO.$==1)T.UncaughtAsyncError(bO.$0);},ct:bM});});};T.UncaughtAsyncError=function(bK){i.log("WebSharper: Uncaught asynchronous exception",bK);};T.StartWithContinuations=function(bK,bL,bM,bN,bO){var bP,bQ;bP=(bQ=(T.defCTS())[0],bO==null?bQ:bO.$0);!bP.c?bK({k:function(bR){if(bR.$==1)bM(bR.$0);else if(bR.$==2)bN(bR.$0);else bL(bR.$0);},ct:bP}):void 0;};T.FromContinuations=function(bK){return function(bL){var bM,bN;bM=[false];bN=function(bO){if(bM[0])bu.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bM[0]=true;T.scheduler().Fork(bO);}};bK(function(bO){bN(function(){bL.k({$:0,$0:bO});});},function(bO){bN(function(){bL.k({$:1,$0:bO});});},function(bO){bN(function(){bL.k({$:2,$0:bO});});});};};T.GetCT=function(){V.$cctor();return V.GetCT;};T.Catch=function(bK){return function(bL){try{bK({k:function(bM){if(bM.$==0)bL.k({$:0,$0:{$:0,$0:bM.$0}});else if(bM.$==1)bL.k({$:0,$0:{$:1,$0:bM.$0}});else bL.k(bM);},ct:bL.ct});}catch(bM){bL.k({$:0,$0:{$:1,$0:bM}});}};};T.TryWith=function(bK,bL){return function(bM){bK({k:function(bN){if(bN.$==0)bM.k({$:0,$0:bN.$0});else if(bN.$==1)try{(bL(bN.$0))(bM);}catch(bO){bM.k(bN);}else bM.k(bN);},ct:bM.ct});};};T.TryFinally=function(bK,bL){return function(bM){bK({k:function(bN){try{bL();bM.k(bN);}catch(bO){bM.k({$:1,$0:bO});}},ct:bM.ct});};};T.Delay=function(bK){return function(bL){try{(bK(null))(bL);}catch(bM){bL.k({$:1,$0:bM});}};};T.Combine=function(bK,bL){return T.Bind(bK,function(){return bL;});};T.Bind=function(bK,bL){return T.checkCancel(function(bM){bK({k:function(bN){var bO;if(bN.$==0){bO=bN.$0;T.scheduler().Fork(function(){try{(bL(bO))(bM);}catch(bP){bM.k({$:1,$0:bP});}});}else T.scheduler().Fork(function(){bM.k(bN);});},ct:bM.ct});});};T.Return=function(bK){return function(bL){bL.k({$:0,$0:bK});};};T.checkCancel=function(bK){return function(bL){if(bL.ct.c)T.cancel(bL);else bK(bL);};};T.cancel=function(bK){bK.k({$:2,$0:new bg.New(bK.ct)});};T.defCTS=function(){V.$cctor();return V.defCTS;};T.scheduler=function(){V.$cctor();return V.scheduler;};T.Register=function(bK,bL){var bM;return bK===T.noneCT()?{Dispose:function(){return null;}}:(bM=bK.r.push(bL)-1,{Dispose:function(){return _2.set(bK.r,bM,function(){});}});};T.noneCT=function(){V.$cctor();return V.noneCT;};V.$cctor=bJ.Cctor(function(){V.noneCT={c:false,r:[]};V.scheduler=new U.New();V.defCTS=[new _6.New()];V.GetCT=function(bK){bK.k({$:0,$0:bK.ct});};V.$cctor=window.ignore;});X=W.T=bJ.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},null,X);X.New=bJ.Ctor(function(bK,bL,bM,bN){this.s=bK;this.c=bL;this.n=bM;this.d=bN;},X);W.Get0=function(bK){return bK instanceof m?W.ArrayEnumerator(bK):bH.Equals(typeof bK,"string")?W.StringEnumerator(bK):"GetEnumerator0"in bK?bK.GetEnumerator0():bK.GetEnumerator();};W.Get=function(bK){return bK instanceof m?W.ArrayEnumerator(bK):bH.Equals(typeof bK,"string")?W.StringEnumerator(bK):bK.GetEnumerator();};W.StringEnumerator=function(bK){return new X.New(0,null,function(bL){var bM;bM=bL.s;return bM<bK.length&&(bL.c=bK.charCodeAt(bM),bL.s=bM+1,true);},void 0);};W.ArrayEnumerator=function(bK){return new X.New(0,null,function(bL){var bM;bM=bL.s;return bM<_2.length(bK)&&(bL.c=_2.get(bK,bM),bL.s=bM+1,true);},void 0);};Z=Y.SingleNode=bJ.Class({ReplaceInDom:function(bK){this.node.parentNode.replaceChild(this.node,bK);}},null,Z);Z.New=bJ.Ctor(function(bK){this.node=bK;},Z);_0.hasDocument=function(){return typeof o!=="undefined";};_0.Activate=function(){var bK;if(_0.hasDocument()){bK=o.getElementById("websharper-data");bK?t(o).ready(function(){var bL;bL=function(bM,bN){bN.Body().ReplaceInDom(o.getElementById(bM));};return _2.iter(function(bM){return bL(bM[0],bM[1]);},D.GetFields(N.Activate(l.parse(bK.getAttribute("content")))));}):void 0;}};_1.Undefined={$:0};_2.splitInto=function(bK,bL){var bM,bN,bO,bP,bQ,bR,bS,bT,bU;if(bK<=0)bu.FailWith("Count must be positive");bN=_2.length(bL);if(bN===0)return[];else{bO=bH.Compare(bK,bN)===-1?bK:bN;bP=_2.create(bO,null);bQ=bN/bO>>0;bM=0;for(bR=0,bS=bN%bO-1;bR<=bS;bR++){bP[bR]=_2.sub(bL,bM,bQ+1);bM=bM+bQ+1;}for(bT=bN%bO,bU=bO-1;bT<=bU;bT++){bP[bT]=_2.sub(bL,bM,bQ);bM=bM+bQ;}return bP;}};_2.contains=function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=_2.length(bL);while(bM&&bN<bP)if(bH.Equals(bL[bN],bK))bM=false;else bN=bN+1;return!bM;};_2.tryFindBack=function(bK,bL){var bM,bN,bO;bM=null;bN=bL.length-1;while(bN>=0&&bM==null){bO=bL[bN];bK(bO)?bM={$:1,$0:bO}:void 0;bN=bN-1;}return bM;};_2.tryFindIndexBack=function(bK,bL){var bM,bN;bM=null;bN=bL.length-1;while(bN>=0&&bM==null){bK(_2.get(bL,bN))?bM={$:1,$0:bN}:void 0;bN=bN-1;}return bM;};_2.mapFold=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bO=new m(bM.length);bN=bL;for(bP=0,bQ=bM.length-1;bP<=bQ;bP++){bR=bK(bN,bM[bP]);bO[bP]=bR[0];bN=bR[1];}return[bO,bN];};_2.mapFoldBack=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS,bT,bU;bP=new m(bL.length);bN=bM;bQ=bL.length;for(bR=1,bS=bQ;bR<=bS;bR++){bT=bQ-bR;bU=bK(bL[bT],bN);bP[bT]=bU[0];bN=bU[1];}return[bP,bN];};_2.mapInPlace=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bL[bM]=bK(bL[bM]);};_2.mapiInPlace=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bL[bM]=bK(bM,bL[bM]);return bL;};_2.sortInPlaceByDescending=function(bK,bL){_2.mapInPlace(function(bM){return bM[0];},_2.mapiInPlace(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return-bH.Compare(bM[1],bN[1]);}));};_3.tryHead=function(bK){var bL;bL=W.Get(bK);try{return bL.MoveNext()?{$:1,$0:bL.Current()}:null;}finally{if("Dispose"in bL)bL.Dispose();}};_3.tryItem=function(bK,bL){var bM,bN,bO;if(bK<0)return null;else{bM=0;bN=W.Get(bL);try{bO=true;while(bO&&bM<=bK)if(bN.MoveNext())bM=bM+1;else bO=false;return bO?{$:1,$0:bN.Current()}:null;}finally{if("Dispose"in bN)bN.Dispose();}}};_3.tryLast=function(bK){var bL,bM;bL=W.Get(bK);try{if(bL.MoveNext()){while(bL.MoveNext());bM={$:1,$0:bL.Current()};}else bM=null;return bM;}finally{if("Dispose"in bL)bL.Dispose();}};_3.chunkBySize=function(bK,bL){bK<=0?bu.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bM;bM=W.Get(bL);return new X.New(null,null,function(bN){var bO;if(bM.MoveNext()){bO=[bM.Current()];while(_2.length(bO)<bK&&bM.MoveNext())bO.push(bM.Current());bN.c=bO;return true;}else return false;},function(){bM.Dispose();});}};};_2.countBy=function(bK,bL){var bM,bN,bO,bP,bQ;bM=new bd.New$5();bN=[];for(bO=0,bP=_2.length(bL)-1;bO<=bP;bO++){bQ=bK(bL[bO]);bM.ContainsKey(bQ)?bM.set_Item(bQ,bM.get_Item(bQ)+1):(bN.push(bQ),bM.Add(bQ,1));}_2.mapInPlace(function(bR){return[bR,bM.get_Item(bR)];},bN);return bN;};_3.except=function(bK,bL){return{GetEnumerator:function(){var bM,bN;bM=W.Get(bL);bN=new bq.New$2(bK);return new X.New(null,null,function(bO){var bP,bQ;if(bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bP);while(!bQ&&bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bP);}return bQ&&(bO.c=bP,true);}else return false;},function(){bM.Dispose();});}};};_4.skip=function(bK,bL){var bM,bN,bO;bM=bL;for(bN=1,bO=bK;bN<=bO;bN++)if(bM.$==0)bu.FailWith("Input list too short.");else bM=bM.$1;return bM;};_2.groupBy=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=new bd.New$5();bN=[];for(bO=0,bP=_2.length(bL)-1;bO<=bP;bO++){bQ=bL[bO];bR=bK(bQ);bM.ContainsKey(bR)?bM.get_Item(bR).push(bQ):(bN.push(bR),bM.Add(bR,[bQ]));}_2.mapInPlace(function(bS){return[bS,bM.get_Item(bS)];},bN);return bN;};_3.insufficient=function(){return bu.FailWith("The input sequence has an insufficient number of elements.");};_3.last=function(bK){var bL,bM;bL=W.Get(bK);try{if(!bL.MoveNext())bM=_3.insufficient();else{while(bL.MoveNext());bM=bL.Current();}return bM;}finally{if("Dispose"in bL)bL.Dispose();}};_3.contains=function(bK,bL){var bM,bN;bM=W.Get(bL);try{bN=false;while(!bN&&bM.MoveNext())bN=bH.Equals(bM.Current(),bK);return bN;}finally{if("Dispose"in bM)bM.Dispose();}};_4.skipWhile=function(bK,bL){var bM;bM=bL;while(!(bM.$==0)&&bK(_4.head(bM)))bM=_4.tail(bM);return bM;};_3.nonNegative=function(){return bu.FailWith("The input must be non-negative.");};_2.checkBounds=function(bK,bL){if(bL<0||bL>=bK.length)bu.FailWith("Index was outside the bounds of the array.");};_2.checkBounds2D=function(bK,bL,bM){if(bL<0||bM<0||bL>=bK.length||bM>=(bK.length?bK[0].length:0))throw new bf.New();};_2.checkRange=function(bK,bL,bM){if(bM<0||bL<0||bK.length<bL+bM)bu.FailWith("Index was outside the bounds of the array.");};_2.set=function(bK,bL,bM){_2.checkBounds(bK,bL);bK[bL]=bM;};_2.get=function(bK,bL){_2.checkBounds(bK,bL);return bK[bL];};_2.sub=function(bK,bL,bM){_2.checkRange(bK,bL,bM);return bK.slice(bL,bL+bM);};_2.setSub=function(bK,bL,bM,bN){var bO,bP;for(bO=0,bP=bM-1;bO<=bP;bO++)_2.set(bK,bL+bO,_2.get(bN,bO));};_2.get2D=function(bK,bL,bM){_2.checkBounds2D(bK,bL,bM);return bK[bL][bM];};_2.set2D=function(bK,bL,bM,bN){_2.checkBounds2D(bK,bL,bM);bK[bL][bM]=bN;};_2.zeroCreate2D=function(bK,bL){var bM;bM=_2.init(bK,function(){return _2.create(bL,null);});bM.dims=2;return bM;};_2.sub2D=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bP=bN<0?0:bN;bQ=bO<0?0:bO;bR=_2.zeroCreate2D(bP,bQ);for(bS=0,bT=bP-1;bS<=bT;bS++){for(bU=0,bV=bQ-1;bU<=bV;bU++)_2.set2D(bR,bS,bU,_2.get2D(bK,bL+bS,bM+bU));}return bR;};_2.setSub2D=function(bK,bL,bM,bN,bO,bP){var bQ,bR,bS,bT;for(bQ=0,bR=bN-1;bQ<=bR;bQ++){for(bS=0,bT=bO-1;bS<=bT;bS++)_2.set2D(bK,bL+bQ,bM+bS,_2.get2D(bP,bQ,bS));}};_2.length=function(bK){return bK.dims===2?bK.length*bK.length:bK.length;};B.checkThis=function(bK){return bH.Equals(bK,null)?bu.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bK;};_2.reverse=function(bK,bL,bM){var bN;bN=_2.sub(bK,bL,bM).slice().reverse();_2.blit(bN,0,bK,bL,_2.length(bN));};_2.sum=function(bK){var bL,bM;bL=0;bM=0;for(;bM<bK.length;bM++)bL+=bK[bM];return bL;};_2.sumBy=function(bK,bL){var bM,bN;bM=0;bN=0;for(;bN<bL.length;bN++)bM+=bK(bL[bN]);return bM;};_2.average=function(bK){return v(_2.sum(bK))/v(bK.length);};_2.averageBy=function(bK,bL){return v(_2.sumBy(bK,bL))/v(bL.length);};_2.blit=function(bK,bL,bM,bN,bO){var bP,bQ;_2.checkRange(bK,bL,bO);_2.checkRange(bM,bN,bO);for(bP=0,bQ=bO-1;bP<=bQ;bP++)bM[bN+bP]=bK[bL+bP];};_2.choose=function(bK,bL){var bM,bN,bO,bP;bM=[];for(bN=0,bO=bL.length-1;bN<=bO;bN++){bP=bK(bL[bN]);bP==null?void 0:bM.push(bP.$0);}return bM;};_2.collect=function(bK,bL){return m.prototype.concat.apply([],_2.map(bK,bL));};_2.concat=function(bK){return m.prototype.concat.apply([],_2.ofSeq(bK));};_2.create=function(bK,bL){var bM,bN,bO;bM=new m(bK);for(bN=0,bO=bK-1;bN<=bO;bN++)bM[bN]=bL;return bM;};_2.exists=function(bK,bL){var bM,bN,bO,bP;bM=false;bN=0;bP=_2.length(bL);while(!bM&&bN<bP)if(bK(bL[bN]))bM=true;else bN=bN+1;return bM;};_2.exists2=function(bK,bL,bM){var bN,bO,bP,bQ;_2.checkLength(bL,bM);bN=false;bO=0;bQ=_2.length(bL);while(!bN&&bO<bQ)if(bK(bL[bO],bM[bO]))bN=true;else bO=bO+1;return bN;};_2.fill=function(bK,bL,bM,bN){var bO,bP;_2.checkRange(bK,bL,bM);for(bO=bL,bP=bL+bM-1;bO<=bP;bO++)bK[bO]=bN;};_2.filter=function(bK,bL){var bM,bN,bO;bM=[];for(bN=0,bO=bL.length-1;bN<=bO;bN++)if(bK(bL[bN]))bM.push(bL[bN]);return bM;};_2.find=function(bK,bL){var bM;bM=_2.tryFind(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_2.findIndex=function(bK,bL){var bM;bM=_2.tryFindIndex(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_2.fold=function(bK,bL,bM){var bN,bO,bP;bN=bL;for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN=bK(bN,bM[bO]);return bN;};_2.fold2=function(bK,bL,bM,bN){var bO,bP,bQ;_2.checkLength(bM,bN);bO=bL;for(bP=0,bQ=bM.length-1;bP<=bQ;bP++)bO=bK(bO,bM[bP],bN[bP]);return bO;};_2.foldBack=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=bM;bP=bL.length;for(bQ=1,bR=bP;bQ<=bR;bQ++)bN=bK(bL[bP-bQ],bN);return bN;};_2.foldBack2=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS;_2.checkLength(bL,bM);bQ=bL.length;bP=bN;for(bR=1,bS=bQ;bR<=bS;bR++)bP=bK(bL[bQ-bR],bM[bQ-bR],bP);return bP;};_2.forall=function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=_2.length(bL);while(bM&&bN<bP)if(bK(bL[bN]))bN=bN+1;else bM=false;return bM;};_2.forall2=function(bK,bL,bM){var bN,bO,bP,bQ;_2.checkLength(bL,bM);bN=true;bO=0;bQ=_2.length(bL);while(bN&&bO<bQ)if(bK(bL[bO],bM[bO]))bO=bO+1;else bN=false;return bN;};_2.init=function(bK,bL){var bM,bN,bO;bK<0?bu.FailWith("Negative size given."):null;bM=new m(bK);for(bN=0,bO=bK-1;bN<=bO;bN++)bM[bN]=bL(bN);return bM;};_2.iter=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bK(bL[bM]);};_2.iter2=function(bK,bL,bM){var bN,bO;_2.checkLength(bL,bM);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bK(bL[bN],bM[bN]);};_2.iteri=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bK(bM,bL[bM]);};_2.iteri2=function(bK,bL,bM){var bN,bO;_2.checkLength(bL,bM);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bK(bN,bL[bN],bM[bN]);};_2.map=function(bK,bL){var bM,bN,bO;bM=new m(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN]=bK(bL[bN]);return bM;};_2.map2=function(bK,bL,bM){var bN,bO,bP;_2.checkLength(bL,bM);bN=new m(bM.length);for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO]=bK(bL[bO],bM[bO]);return bN;};_2.mapi=function(bK,bL){var bM,bN,bO;bM=new m(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN]=bK(bN,bL[bN]);return bM;};_2.mapi2=function(bK,bL,bM){var bN,bO,bP;_2.checkLength(bL,bM);bN=new m(bL.length);for(bO=0,bP=bL.length-1;bO<=bP;bO++)bN[bO]=bK(bO,bL[bO],bM[bO]);return bN;};_2.max=function(bK){return _2.reduce(function(bL,bM){return bH.Compare(bL,bM)===1?bL:bM;},bK);};_2.maxBy=function(bK,bL){return _2.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))===1?bM:bN;},bL);};_2.min=function(bK){return _2.reduce(function(bL,bM){return bH.Compare(bL,bM)===-1?bL:bM;},bK);};_2.minBy=function(bK,bL){return _2.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))===-1?bM:bN;},bL);};_2.ofList=function(bK){var bL,bM;bM=[];bL=bK;while(!(bL.$==0)){bM.push(_4.head(bL));bL=_4.tail(bL);}return bM;};_2.ofSeq=function(bK){var bL,bM;if(bK instanceof m)return bK.slice();else if(bK instanceof bs)return _2.ofList(bK);else{bL=[];bM=W.Get(bK);try{while(bM.MoveNext())bL.push(bM.Current());return bL;}finally{if("Dispose"in bM)bM.Dispose();}}};_2.partition=function(bK,bL){var bM,bN,bO,bP;bM=[];bN=[];for(bO=0,bP=bL.length-1;bO<=bP;bO++)if(bK(bL[bO]))bM.push(bL[bO]);else bN.push(bL[bO]);return[bM,bN];};_2.permute=function(bK,bL){var bM,bN,bO;bM=new m(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bK(bN)]=bL[bN];return bM;};_2.pick=function(bK,bL){var bM;bM=_2.tryPick(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_2.reduce=function(bK,bL){var bM,bN,bO;_2.nonEmpty(bL);bM=bL[0];for(bN=1,bO=bL.length-1;bN<=bO;bN++)bM=bK(bM,bL[bN]);return bM;};_2.reduceBack=function(bK,bL){var bM,bN,bO,bP,bQ;_2.nonEmpty(bL);bO=bL.length;bN=bL[bO-1];for(bP=2,bQ=bO;bP<=bQ;bP++)bN=bK(bL[bO-bP],bN);return bN;};_2.scan=function(bK,bL,bM){var bN,bO,bP;bN=new m(1+bM.length);bN[0]=bL;for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO+1]=bK(bN[bO],bM[bO]);return bN;};_2.scanBack=function(bK,bL,bM){var bN,bO,bP,bQ;bN=bL.length;bO=new m(1+bN);bO[bN]=bM;for(bP=0,bQ=bN-1;bP<=bQ;bP++)bO[bN-bP-1]=bK(bL[bN-bP-1],bO[bN-bP]);return bO;};_2.sort=function(bK){return _2.map(function(bL){return bL[0];},_2.mapi(function(bL,bM){return[bM,bL];},bK).sort(bH.Compare));};_2.sortBy=function(bK,bL){return _2.map(function(bM){return bM[0];},_2.mapi(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return bH.Compare(bM[1],bN[1]);}));};_2.sortInPlace=function(bK){_2.mapInPlace(function(bL){return bL[0];},_2.mapiInPlace(function(bL,bM){return[bM,bL];},bK).sort(bH.Compare));};_2.sortInPlaceBy=function(bK,bL){_2.mapInPlace(function(bM){return bM[0];},_2.mapiInPlace(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return bH.Compare(bM[1],bN[1]);}));};_2.sortInPlaceWith=function(bK,bL){bL.sort(bK);};_2.sortWith=function(bK,bL){return bL.slice().sort(bK);};_2.sortByDescending=function(bK,bL){return _2.map(function(bM){return bM[0];},_2.mapi(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return-bH.Compare(bM[1],bN[1]);}));};_2.sortDescending=function(bK){return _2.map(function(bL){return bL[0];},_2.mapi(function(bL,bM){return[bM,bL];},bK).sort(function(bL,bM){return-bH.Compare(bL,bM);}));};_2.tryFind=function(bK,bL){var bM,bN;bM=null;bN=0;while(bN<bL.length&&bM==null){bK(bL[bN])?bM={$:1,$0:bL[bN]}:void 0;bN=bN+1;}return bM;};_2.tryFindIndex=function(bK,bL){var bM,bN;bM=null;bN=0;while(bN<bL.length&&bM==null){bK(bL[bN])?bM={$:1,$0:bN}:void 0;bN=bN+1;}return bM;};_2.tryHead=function(bK){return bK.length===0?null:{$:1,$0:bK[0]};};_2.tryItem=function(bK,bL){return bL.length<=bK||bK<0?null:{$:1,$0:bL[bK]};};_2.tryLast=function(bK){var bL;bL=bK.length;return bL===0?null:{$:1,$0:bK[bL-1]};};_2.tryPick=function(bK,bL){var bM,bN,bO;bM=null;bN=0;while(bN<bL.length&&bM==null){bO=bK(bL[bN]);bO!=null&&bO.$==1?bM=bO:void 0;bN=bN+1;}return bM;};_2.unzip=function(bK){var bL,bM,bN,bO,bP;bL=[];bM=[];for(bN=0,bO=bK.length-1;bN<=bO;bN++){bP=bK[bN];bL.push(bP[0]);bM.push(bP[1]);}return[bL,bM];};_2.unzip3=function(bK){var bL,bM,bN,bO,bP,bQ;bL=[];bM=[];bN=[];for(bO=0,bP=bK.length-1;bO<=bP;bO++){bQ=bK[bO];bL.push(bQ[0]);bM.push(bQ[1]);bN.push(bQ[2]);}return[bL,bM,bN];};_2.zip=function(bK,bL){var bM,bN,bO;_2.checkLength(bK,bL);bM=_2.create(bK.length,null);for(bN=0,bO=bK.length-1;bN<=bO;bN++)bM[bN]=[bK[bN],bL[bN]];return bM;};_2.zip3=function(bK,bL,bM){var bN,bO,bP;_2.checkLength(bK,bL);_2.checkLength(bL,bM);bN=_2.create(bK.length,null);for(bO=0,bP=bK.length-1;bO<=bP;bO++)bN[bO]=[bK[bO],bL[bO],bM[bO]];return bN;};_2.chunkBySize=function(bK,bL){return _2.ofSeq(_3.chunkBySize(bK,bL));};_2.compareWith=function(bK,bL,bM){return _3.compareWith(bK,bL,bM);};_2.distinct=function(bK){return _2.ofSeq(_3.distinct(bK));};_2.distinctBy=function(bK,bL){return _2.ofSeq(_3.distinctBy(bK,bL));};_2.except=function(bK,bL){return _2.ofSeq(_3.except(bK,bL));};_2.findBack=function(bK,bL){var bM;bM=_2.tryFindBack(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_2.findIndexBack=function(bK,bL){var bM;bM=_2.tryFindIndexBack(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_2.head=function(bK){_2.nonEmpty(bK);return bK[0];};_2.last=function(bK){_2.nonEmpty(bK);return bK[bK.length-1];};_2.map3=function(bK,bL,bM,bN){var bO,bP,bQ;_2.checkLength(bL,bM);_2.checkLength(bL,bN);bO=new m(bN.length);for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO[bP]=bK(bL[bP],bM[bP],bN[bP]);return bO;};_2.pairwise=function(bK){return _2.ofSeq(_3.pairwise(bK));};_2.replicate=function(bK,bL){return _2.create(bK,bL);};_2.indexed=function(bK){return _2.mapi(function(bL,bM){return[bL,bM];},bK);};_2.skip=function(bK,bL){return bK<0?_3.nonNegative():bK>bL.length?_3.insufficient():bL.slice(bK);};_2.skipWhile=function(bK,bL){var bM,bN;bN=bL.length;bM=0;while(bM<bN&&bK(bL[bM]))bM=bM+1;return bL.slice(bM);};_2.tail=function(bK){return _2.skip(1,bK);};_2.take=function(bK,bL){return bK<0?_3.nonNegative():bK>bL.length?_3.insufficient():bL.slice(0,bK);};_2.takeWhile=function(bK,bL){var bM,bN;bN=bL.length;bM=0;while(bM<bN&&bK(bL[bM]))bM=bM+1;return bL.slice(0,bM);};_2.exactlyOne=function(bK){return bK.length===1?bK[0]:bu.FailWith("The input does not have precisely one element.");};_2.unfold=function(bK,bL){return _2.ofSeq(_3.unfold(bK,bL));};_2.windowed=function(bK,bL){return _2.ofSeq(_3.windowed(bK,bL));};_2.splitAt=function(bK,bL){return[_2.take(bK,bL),_2.skip(bK,bL)];};_2.nonEmpty=function(bK){if(bK.length===0)bu.FailWith("The input array was empty.");};_2.checkLength=function(bK,bL){if(bK.length!==bL.length)bu.FailWith("The arrays have different lengths.");};_5.init=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=_2.zeroCreate2D(bK,bL);for(bO=0,bP=bK-1;bO<=bP;bO++){for(bQ=0,bR=bL-1;bQ<=bR;bQ++)_2.set2D(bN,bO,bQ,bM(bO,bQ));}return bN;};_5.iter=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=bL.length;bN=bL.length?bL[0].length:0;for(bO=0,bP=bM-1;bO<=bP;bO++){for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bK(_2.get2D(bL,bO,bQ));}};_5.iteri=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=bL.length;bN=bL.length?bL[0].length:0;for(bO=0,bP=bM-1;bO<=bP;bO++){for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bK(bO,bQ,_2.get2D(bL,bO,bQ));}};_5.map=function(bK,bL){return _5.init(bL.length,bL.length?bL[0].length:0,function(bM,bN){return bK(_2.get2D(bL,bM,bN));});};_5.mapi=function(bK,bL){return _5.init(bL.length,bL.length?bL[0].length:0,function(bM,bN){return bK(bM,bN,_2.get2D(bL,bM,bN));});};_5.copy=function(bK){return _5.init(bK.length,bK.length?bK[0].length:0,function(bL,bM){return _2.get2D(bK,bL,bM);});};_6=B.CancellationTokenSource=bJ.Class({CancelAfter:function(bK){var bL,bM;bL=this;!this.c?(bM=this.pending,bM==null?void 0:f(bM.$0),this.pending={$:1,$0:d(function(){bL.Cancel$1();},bK)}):void 0;},Cancel:function(bK){if(!bK)this.Cancel$1();else if(!this.c){this.c=true;_2.iter(function(bL){bL();},this.r);}},Cancel$1:function(){var bK;if(!this.c){this.c=true;bK=_2.choose(function(bL){try{bL();return null;}catch(bM){return{$:1,$0:bM};}},this.r);if(_2.length(bK)>0)throw new bk.New$3(bK);else void 0;}}},null,_6);_6.CreateLinkedTokenSource=function(bK,bL){return _6.CreateLinkedTokenSource$1([bK,bL]);};_6.CreateLinkedTokenSource$1=function(bK){var bL;bL=new _6.New();_2.iter(function(bM){var bN;bN=function(){return bL.Cancel$1();};T.Register(bM,function(){bN();});},bK);return bL;};_6.New=bJ.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},_6);_7.IsWhiteSpace=function(bK){return r.fromCharCode(bK).match(new p("\\s"))!==null;};_7.Parse=function(bK){return bK.length===1?bK.charCodeAt(0):bu.FailWith("String must be exactly one character long.");};_7.IsUpper=function(bK){return bK>=65&&bK<=90;};_7.IsLower=function(bK){return bK>=97&&bK<=122;};_7.IsLetterOrDigit=function(bK){return _7.IsLetter(bK)||_7.IsDigit(bK);};_7.IsLetter=function(bK){return bK>=65&&bK<=90||bK>=97&&bK<=122;};_7.IsDigit=function(bK){return bK>=48&&bK<=57;};_7.IsControl=function(bK){return bK>=0&&bK<=31||bK>=128&&bK<=159;};_7.GetNumericValue=function(bK){return bK>=48&&bK<=57?v(bK)-v(48):-1;};_8.observer=function(bK){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bK};};_9.LongTime=function(bK){return(new s(bK)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};_9.ShortTime=function(bK){return(new s(bK)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};_9.LongDate=function(bK){return(new s(bK)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};_9.Parse=function(bK){var bL;bL=_9.TryParse(bK);return bL!=null&&bL.$==1?bL.$0:bu.FailWith("Failed to parse date string.");};_9.TryParse=function(bK){var bL;bL=s.parse(bK);return w(bL)?null:{$:1,$0:bL};};_9.AddMonths=function(bK,bL){var bM;bM=new s(bK);return(new s(bM.getFullYear(),bM.getMonth()+bL,bM.getDate(),bM.getHours(),bM.getMinutes(),bM.getSeconds(),bM.getMilliseconds())).getTime();};_9.AddYears=function(bK,bL){var bM;bM=new s(bK);return(new s(bM.getFullYear()+bL,bM.getMonth(),bM.getDate(),bM.getHours(),bM.getMinutes(),bM.getSeconds(),bM.getMilliseconds())).getTime();};_9.TimePortion=function(bK){var bL;bL=new s(bK);return(((24*0+bL.getHours())*60+bL.getMinutes())*60+bL.getSeconds())*1000+bL.getMilliseconds();};_9.DatePortion=function(bK){var bL;bL=new s(bK);return(new s(bL.getFullYear(),bL.getMonth(),bL.getDate())).getTime();};_=B.DateTimeOffset=bJ.Class({ToUniversalTime:function(){return new _.New(this.d,0);},ToLocalTime:function(){return new _.New(this.d,(new s()).getTimezoneOffset());}},null,_);_.New=bJ.Ctor(function(bK,bL){this.d=bK;},_);$.InvocationList=function(bK){return bK.$Invokes||[bK];};$.RemoveAll=function(bK,bL){var bM;bM=$.InvocationList(bK);_2.length($.InvocationList(bL))>1?bu.FailWith("TODO: Remove multicast delegates"):void 0;return bJ.CreateDelegate(_2.filter(function(bN){return!bH.Equals(bN,bL);},bM));};$.Remove=function(bK,bL){var bM,bN,bO,bP,bQ,bR,bS;bO=$.InvocationList(bK);if(_2.length($.InvocationList(bL))>1)bu.FailWith("TODO: Remove multicast delegates");bP=[];bN=false;for(bQ=_2.length(bO)-1,bR=0;bQ>=bR;bQ--){bS=_2.get(bO,bQ);!bN&&bJ.DelegateEqual(bS,bL)?bN=true:bP.unshift(bS);}return bJ.CreateDelegate(bP);};$.DelegateTarget=function(bK){var bL;return!bK?null:"$Target"in bK?bK.$Target:"$Invokes"in bK?(bL=bK.$Invokes,(_2.get(bL,_2.length(bL)-1))[1]):null;};ba.getHashCode=function(bK,bL){return bK.CGetHashCode(bL);};ba.equals=function(bK){return function(bL,bM){return bK.CEquals(bL,bM);};};ba.alreadyAdded=function(){return bu.FailWith("An item with the same key has already been added.");};ba.notPresent=function(){return bu.FailWith("The given key was not present in the dictionary.");};bb=E.KeyCollection=bJ.Class({GetEnumerator$1:function(){return W.Get(_3.map(function(bK){return bK.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},null,bb);bb.New=bJ.Ctor(function(bK){this.d=bK;},bb);bc=E.ValueCollection=bJ.Class({GetEnumerator$1:function(){return W.Get(_3.map(function(bK){return bK.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},null,bc);bc.New=bJ.Ctor(function(bK){this.d=bK;},bc);bd=E.Dictionary=bJ.Class({remove:function(bK){var bL,bM,bN,bO;bL=this;bM=this.hash(bK);bN=this.data[bM];return bN&&(bO=_2.filter(function(bP){return!bL.equals.apply(null,[(bu.KeyValue(bP))[0],bK]);},bN),_2.length(bO)<bN.length&&(this.count=this.count-1,this.data[bM]=bO,true));},add:function(bK,bL){var bM,bN,bO;bM=this;bN=this.hash(bK);bO=this.data[bN];bO?(_2.exists(function(bP){return bM.equals.apply(null,[(bu.KeyValue(bP))[0],bK]);},bO)?ba.alreadyAdded():void 0,this.count=this.count+1,bO.push({K:bK,V:bL})):(this.count=this.count+1,this.data[bN]=new m({K:bK,V:bL}));},set:function(bK,bL){var bM,bN,bO,bP;bM=this;bN=this.hash(bK);bO=this.data[bN];bO?(bP=_2.tryFindIndex(function(bQ){return bM.equals.apply(null,[(bu.KeyValue(bQ))[0],bK]);},bO),bP==null?(this.count=this.count+1,bO.push({K:bK,V:bL})):bO[bP.$0]={K:bK,V:bL}):(this.count=this.count+1,this.data[bN]=new m({K:bK,V:bL}));},get:function(bK){var bL,bM;bL=this;bM=this.data[this.hash(bK)];return bM?_2.pick(function(bN){var bO;bO=bu.KeyValue(bN);return bL.equals.apply(null,[bO[0],bK])?{$:1,$0:bO[1]}:null;},bM):ba.notPresent();},get_Keys:function(){return new bb.New(this);},get_Values:function(){return new bc.New(this);},TryGetValue:function(bK,bL){var bM,bN,bO;bM=this;bN=this.data[this.hash(bK)];return bN&&(bO=_2.tryPick(function(bP){var bQ;bQ=bu.KeyValue(bP);return bM.equals.apply(null,[bQ[0],bK])?{$:1,$0:bQ[1]}:null;},bN),bO!=null&&bO.$==1&&(bL.set(bO.$0),true));},Remove:function(bK){return this.remove(bK);},GetEnumerator$1:function(){return W.Get0(this);},set_Item:function(bK,bL){this.set(bK,bL);},get_Item:function(bK){return this.get(bK);},ContainsKey:function(bK){var bL,bM;bL=this;bM=this.data[this.hash(bK)];return bM&&_2.exists(function(bN){return bL.equals.apply(null,[(bu.KeyValue(bN))[0],bK]);},bM);},Clear:function(){this.data=[];this.count=0;},Add:function(bK,bL){this.add(bK,bL);},GetEnumerator:function(){return W.Get0(this);},GetEnumerator0:function(){return W.Get0(_2.concat(D.GetFieldValues(this.data)));}},null,bd);bd.New=bJ.Ctor(function(bK,bL){bd.New$6.call(this,bK,ba.equals(bL),function(bM){return ba.getHashCode(bL,bM);});},bd);bd.New$1=bJ.Ctor(function(bK){bd.New$6.call(this,bK,bH.Equals,bH.Hash);},bd);bd.New$2=bJ.Ctor(function(bK,bL){bd.New$3.call(this,bL);},bd);bd.New$3=bJ.Ctor(function(bK){bd.New$6.call(this,[],ba.equals(bK),function(bL){return ba.getHashCode(bK,bL);});},bd);bd.New$4=bJ.Ctor(function(bK){bd.New$5.call(this);},bd);bd.New$5=bJ.Ctor(function(){bd.New$6.call(this,[],bH.Equals,bH.Hash);},bd);bd.New$6=bJ.Ctor(function(bK,bL,bM){var bN,bO;this.equals=bL;this.hash=bM;this.count=0;this.data=[];bN=W.Get(bK);try{while(bN.MoveNext()){bO=bN.Current();this.set(bO.K,bO.V);}}finally{if("Dispose"in bN)bN.Dispose();}},bd);be=B.MatchFailureException=bJ.Class({},null,be);be.New=bJ.Ctor(function(bK,bL,bM){this.message=bK+" at "+r(bL)+":"+r(bM);},be);bf=B.IndexOutOfRangeException=bJ.Class({},null,bf);bf.New=bJ.Ctor(function(){bf.New$1.call(this,"Index was outside the bounds of the array.");},bf);bf.New$1=bJ.Ctor(function(bK){this.message=bK;},bf);bg=B.OperationCanceledException=bJ.Class({},null,bg);bg.New=bJ.Ctor(function(bK){bg.New$1.call(this,"The operation was canceled.",null,bK);},bg);bg.New$1=bJ.Ctor(function(bK,bL,bM){this.message=bK;this.inner=bL;this.ct=bM;},bg);bh=B.ArgumentException=bJ.Class({},null,bh);bh.New=bJ.Ctor(function(bK,bL){bh.New$2.call(this,bL+"\nParameter name: "+bK);},bh);bh.New$1=bJ.Ctor(function(){bh.New$2.call(this,"Value does not fall within the expected range.");},bh);bh.New$2=bJ.Ctor(function(bK){this.message=bK;},bh);bi=B.ArgumentOutOfRangeException=bJ.Class({},null,bi);bi.New=bJ.Ctor(function(){bi.New$1.call(this,"Specified argument was out of the range of valid values.");},bi);bi.New$1=bJ.Ctor(function(bK){this.message=bK;},bi);bj=B.InvalidOperationException=bJ.Class({},null,bj);bj.New=bJ.Ctor(function(){bj.New$1.call(this,"Operation is not valid due to the current state of the object.");},bj);bj.New$1=bJ.Ctor(function(bK){this.message=bK;},bj);bk=B.AggregateException=bJ.Class({},null,bk);bk.New=bJ.Ctor(function(bK,bL){bk.New$4.call(this,bK,[bL]);},bk);bk.New$1=bJ.Ctor(function(bK,bL){bk.New$4.call(this,bK,_2.ofSeq(bL));},bk);bk.New$2=bJ.Ctor(function(bK){bk.New$4.call(this,"One or more errors occurred.",_2.ofSeq(bK));},bk);bk.New$3=bJ.Ctor(function(bK){bk.New$4.call(this,"One or more errors occurred.",bK);},bk);bk.New$4=bJ.Ctor(function(bK,bL){this.message=bK;this.innerExceptions=bL;},bk);bl=B.TimeoutException=bJ.Class({},null,bl);bl.New=bJ.Ctor(function(){bl.New$1.call(this,"The operation has timed out.");},bl);bl.New$1=bJ.Ctor(function(bK){this.message=bK;},bl);bm=B.FormatException=bJ.Class({},null,bm);bm.New=bJ.Ctor(function(){bm.New$1.call(this,"One of the identified items was in an invalid format.");},bm);bm.New$1=bJ.Ctor(function(bK){this.message=bK;},bm);bn=B.OverflowException=bJ.Class({},null,bn);bn.New=bJ.Ctor(function(){bn.New$1.call(this,"Arithmetic operation resulted in an overflow.");},bn);bn.New$1=bJ.Ctor(function(bK){this.message=bK;},bn);_2.create2D=function(bK){var bL;bL=_2.ofSeq(_3.map(_2.ofSeq,bK));bL.dims=2;return bL;};bo.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new p("[xy]","g"),function(bK){var bL,bM;bL=x.random()*16|0;bM=bK=="x"?bL:bL&3|8;return bM.toString(16);});};bp.concat=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push.apply(bL,bK[bN]);return bL;};bq=E.HashSet=bJ.Class({add:function(bK){var bL,bM;bL=this.hash(bK);bM=this.data[bL];return bM==null?(this.data[bL]=[bK],this.count=this.count+1,true):this.arrContains(bK,bM)?false:(bM.push(bK),this.count=this.count+1,true);},arrRemove:function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=bL.length;while(bM&&bN<bP)if(this.equals.apply(null,[bL[bN],bK])){bL.splice.apply(bL,[bN,1]);bM=false;}else bN=bN+1;return!bM;},arrContains:function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=bL.length;while(bM&&bN<bP)if(this.equals.apply(null,[bL[bN],bK]))bM=false;else bN=bN+1;return!bM;},UnionWith:function(bK){var bL;bL=W.Get(bK);try{while(bL.MoveNext())this.Add(bL.Current());}finally{if("Dispose"in bL)bL.Dispose();}},SymmetricExceptWith:function(bK){var bL,bM;bL=W.Get(bK);try{while(bL.MoveNext()){bM=bL.Current();this.Contains(bM)?this.Remove(bM):this.Add(bM);}}finally{if("Dispose"in bL)bL.Dispose();}},SetEquals:function(bK){var bL;bL=new bq.New$4(bK,this.equals,this.hash);return this.get_Count()===bL.get_Count()&&this.IsSupersetOf(bL);},RemoveWhere:function(bK){var bL,bM,bN,bO,bP;bM=bp.concat(this.data);bL=0;for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];bK(bP)?this.Remove(bP)?bL=bL+1:void 0:void 0;}return bL;},Remove:function(bK){var bL;bL=this.data[this.hash(bK)];return bL==null?false:this.arrRemove(bK,bL)&&(this.count=this.count-1,true);},Overlaps:function(bK){var bL;bL=this;return _3.exists(function(bM){return bL.Contains(bM);},bK);},IsSupersetOf:function(bK){var bL;bL=this;return _3.forall(function(bM){return bL.Contains(bM);},bK);},IsSubsetOf:function(bK){var bL;bL=new bq.New$4(bK,this.equals,this.hash);return _2.forall(function(bM){return bL.Contains(bM);},bp.concat(this.data));},IsProperSupersetOf:function(bK){var bL;bL=_2.ofSeq(bK);return this.count>_2.length(bL)&&this.IsSupersetOf(bL);},IsProperSubsetOf:function(bK){var bL;bL=_2.ofSeq(bK);return this.count<_2.length(bL)&&this.IsSubsetOf(bL);},IntersectWith:function(bK){var bL,bM,bN,bO,bP;bL=new bq.New$4(bK,this.equals,this.hash);bM=bp.concat(this.data);for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];!bL.Contains(bP)?this.Remove(bP):void 0;}},ExceptWith:function(bK){var bL;bL=W.Get(bK);try{while(bL.MoveNext())this.Remove(bL.Current());}finally{if("Dispose"in bL)bL.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bK){var bL,bM,bN,bO;bL=0;bM=bp.concat(this.data);for(bN=0,bO=bM.length-1;bN<=bO;bN++)_2.set(bK,bN,bM[bN]);},Contains:function(bK){var bL;bL=this.data[this.hash(bK)];return bL==null?false:this.arrContains(bK,bL);},Clear:function(){this.data=[];this.count=0;},Add:function(bK){return this.add(bK);},GetEnumerator:function(){return W.Get(bp.concat(this.data));},GetEnumerator0:function(){return W.Get(bp.concat(this.data));}},null,bq);bq.New=bJ.Ctor(function(bK,bL){bq.New$4.call(this,bK,ba.equals(bL),function(bM){return ba.getHashCode(bL,bM);});},bq);bq.New$1=bJ.Ctor(function(bK){bq.New$4.call(this,[],ba.equals(bK),function(bL){return ba.getHashCode(bK,bL);});},bq);bq.New$2=bJ.Ctor(function(bK){bq.New$4.call(this,bK,bH.Equals,bH.Hash);},bq);bq.New$3=bJ.Ctor(function(){bq.New$4.call(this,[],bH.Equals,bH.Hash);},bq);bq.New$4=bJ.Ctor(function(bK,bL,bM){var bN;this.equals=bL;this.hash=bM;this.data=[];this.count=0;bN=W.Get(bK);try{while(bN.MoveNext())this.add(bN.Current());}finally{if("Dispose"in bN)bN.Dispose();}},bq);br.Force=function(bK){return bK.f();};br.CreateFromValue=function(bK){return{c:true,v:bK,f:br.cachedLazy};};br.Create=function(bK){return{c:false,v:bK,f:br.forceLazy};};br.forceLazy=function(){var bK;bK=this.v();this.c=true;this.v=bK;this.f=br.cachedLazy;return bK;};br.cachedLazy=function(){return this.v;};bs=_4.T=bJ.Class({GetSlice:function(bK,bL){var bM;return bK!=null&&bK.$==1?bL!=null&&bL.$==1?(bM=bK.$0,_4.ofSeq(_3.take(bL.$0-bM+1,_4.skip(bM,this)))):_4.skip(bK.$0,this):bL!=null&&bL.$==1?_4.ofSeq(_3.take(bL.$0+1,this)):this;},get_Item:function(bK){return _3.nth(bK,this);},get_Length:function(){return _4.length(this);},GetEnumerator:function(){return new X.New(this,null,function(bK){var bL;bL=bK.s;return bL.$==0?false:(bK.c=bL.$0,bK.s=bL.$1,true);},void 0);},GetEnumerator0:function(){return W.Get(this);}},null,bs);bs.Empty=new bs({$:0});_4.append=function(bK,bL){var bM,bN,bO,bP,bQ;if(bK.$==0)return bL;else if(bL.$==0)return bK;else{bP=new bs({$:1});bM=bP;bN=bK;bO=true;while(bO){bM.$0=bN.$0;bN=bN.$1;bN.$==0?bO=false:bM=(bQ=new bs({$:1}),bM.$1=bQ,bQ);}(function(){}(void(bM.$1=bL)));return bP;}};_4.choose=function(bK,bL){return _4.ofSeq(_3.choose(bK,bL));};_4.collect=function(bK,bL){return _4.ofSeq(_3.collect(bK,bL));};_4.concat=function(bK){return _4.ofSeq(_3.concat(bK));};_4.exists=function(bK,bL){var bM,bN;bM=false;bN=bL;while(!bM&&bN.$==1){bM=bK(bN.$0);bN=bN.$1;}return bM;};_4.exists2=function(bK,bL,bM){var bN,bO,bP;bN=false;bO=bL;bP=bM;while(!bN&&bO.$==1&&bP.$==1){bN=bK(bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;}!bN&&(bO.$==1||bP.$==1)?_4.badLengths():void 0;return bN;};_4.filter=function(bK,bL){return _4.ofSeq(_3.filter(bK,bL));};_4.fold2=function(bK,bL,bM,bN){return _2.fold2(bK,bL,_2.ofList(bM),_2.ofList(bN));};_4.foldBack=function(bK,bL,bM){return _2.foldBack(bK,_2.ofList(bL),bM);};_4.foldBack2=function(bK,bL,bM,bN){return _2.foldBack2(bK,_2.ofList(bL),_2.ofList(bM),bN);};_4.forAll=function(bK,bL){var bM,bN;bM=true;bN=bL;while(bM&&bN.$==1){bM=bK(bN.$0);bN=bN.$1;}return bM;};_4.forall2=function(bK,bL,bM){var bN,bO,bP;bN=true;bO=bL;bP=bM;while(bN&&bO.$==1&&bP.$==1){bN=bK(bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;}bN&&(bO.$==1||bP.$==1)?_4.badLengths():void 0;return bN;};_4.head=function(bK){return bK.$==1?bK.$0:_4.listEmpty();};_4.init=function(bK,bL){return _4.ofArray(_2.init(bK,bL));};_4.iter=function(bK,bL){var bM;bM=bL;while(bM.$==1){bK(_4.head(bM));bM=_4.tail(bM);}};_4.iter2=function(bK,bL,bM){var bN,bO;bN=bL;bO=bM;while(bN.$==1){bO.$==0?_4.badLengths():void 0;bK(_4.head(bN),_4.head(bO));bN=_4.tail(bN);bO=_4.tail(bO);}bO.$==1?_4.badLengths():void 0;};_4.iteri=function(bK,bL){var bM,bN;bM=bL;bN=0;while(bM.$==1){bK(bN,_4.head(bM));bM=_4.tail(bM);bN=bN+1;}};_4.iteri2=function(bK,bL,bM){var bN,bO,bP;bN=bL;bO=bM;bP=0;while(bN.$==1){bO.$==0?_4.badLengths():void 0;bK(bP,_4.head(bN),_4.head(bO));bN=_4.tail(bN);bO=_4.tail(bO);bP=bP+1;}bO.$==1?_4.badLengths():void 0;};_4.length=function(bK){var bL,bM;bL=bK;bM=0;while(bL.$==1){bL=_4.tail(bL);bM=bM+1;}return bM;};_4.map=function(bK,bL){var bM,bN,bO,bP,bQ;if(bL.$==0)return bL;else{bP=new bs({$:1});bM=bP;bN=bL;bO=true;while(bO){bM.$0=bK(bN.$0);bN=bN.$1;bN.$==0?bO=false:bM=(bQ=new bs({$:1}),bM.$1=bQ,bQ);}bM.$1=bs.Empty;return bP;}};_4.map2=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS;bN=bL.$==1&&bM.$==1;if(!bN)return bL.$==1||bM.$==1?_4.badLengths():bL;else{bR=new bs({$:1});bO=bR;bP=bL;bQ=bM;while(bN){bO.$0=bK(bP.$0,bQ.$0);bP=bP.$1;bQ=bQ.$1;bP.$==1&&bQ.$==1?bO=(bS=new bs({$:1}),bO.$1=bS,bS):bN=false;}if(bP.$==1||bQ.$==1)_4.badLengths();bO.$1=bs.Empty;return bR;}};_4.map3=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT,bU;bO=bL.$==1&&bM.$==1&&bN.$==1;if(!bO)return bL.$==1||bM.$==1||bN.$==1?_4.badLengths():bL;else{bT=new bs({$:1});bP=bT;bQ=bL;bR=bM;bS=bN;while(bO){bP.$0=bK(bQ.$0,bR.$0,bS.$0);bQ=bQ.$1;bR=bR.$1;bS=bS.$1;bQ.$==1&&bR.$==1&&bS.$==1?bP=(bU=new bs({$:1}),bP.$1=bU,bU):bO=false;}if(bQ.$==1||bR.$==1||bS.$==1)_4.badLengths();bP.$1=bs.Empty;return bT;}};_4.mapi=function(bK,bL){var bM,bN,bO,bP,bQ,bR;if(bL.$==0)return bL;else{bQ=new bs({$:1});bM=bQ;bN=bL;bO=0;bP=true;while(bP){bM.$0=bK(bO,bN.$0);bN=bN.$1;bN.$==0?bP=false:(bM=(bR=new bs({$:1}),bM.$1=bR,bR),bO=bO+1);}bM.$1=bs.Empty;return bQ;}};_4.mapi2=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS,bT;bN=bL.$==1&&bM.$==1;if(!bN)return bL.$==1||bM.$==1?_4.badLengths():bL;else{bS=new bs({$:1});bO=bS;bP=bL;bQ=bM;bR=0;while(bN){bO.$0=bK(bR,bP.$0,bQ.$0);bP=bP.$1;bQ=bQ.$1;bP.$==1&&bQ.$==1?(bO=(bT=new bs({$:1}),bO.$1=bT,bT),bR=bR+1):bN=false;}if(bP.$==1||bQ.$==1)_4.badLengths();bO.$1=bs.Empty;return bS;}};_4.max=function(bK){return _3.reduce(function(bL,bM){return bH.Compare(bL,bM)===1?bL:bM;},bK);};_4.maxBy=function(bK,bL){return _3.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))===1?bM:bN;},bL);};_4.min=function(bK){return _3.reduce(function(bL,bM){return bH.Compare(bL,bM)===-1?bL:bM;},bK);};_4.minBy=function(bK,bL){return _3.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))===-1?bM:bN;},bL);};_4.ofArray=function(bK){var bL,bM,bN;bL=bs.Empty;for(bM=_2.length(bK)-1,bN=0;bM>=bN;bM--)bL=new bs({$:1,$0:_2.get(bK,bM),$1:bL});return bL;};_4.ofSeq=function(bK){var bL,bM,bN,bO,bP,bQ;if(bK instanceof bs)return bK;else if(bK instanceof m)return _4.ofArray(bK);else{bL=W.Get(bK);try{bN=bL.MoveNext();if(!bN)bM=bs.Empty;else{bP=new bs({$:1});bO=bP;while(bN){bO.$0=bL.Current();bL.MoveNext()?bO=(bQ=new bs({$:1}),bO.$1=bQ,bQ):bN=false;}bO.$1=bs.Empty;bM=bP;}return bM;}finally{if("Dispose"in bL)bL.Dispose();}}};_4.partition=function(bK,bL){var bM;bM=_2.partition(bK,_2.ofList(bL));return[_4.ofArray(bM[0]),_4.ofArray(bM[1])];};_4.permute=function(bK,bL){return _4.ofArray(_2.permute(bK,_2.ofList(bL)));};_4.reduceBack=function(bK,bL){return _2.reduceBack(bK,_2.ofList(bL));};_4.replicate=function(bK,bL){return _4.ofArray(_2.create(bK,bL));};_4.rev=function(bK){var bL,bM;bL=bs.Empty;bM=bK;while(bM.$==1){bL=new bs({$:1,$0:bM.$0,$1:bL});bM=bM.$1;}return bL;};_4.scan=function(bK,bL,bM){return _4.ofSeq(_3.scan(bK,bL,bM));};_4.scanBack=function(bK,bL,bM){return _4.ofArray(_2.scanBack(bK,_2.ofList(bL),bM));};_4.sort=function(bK){var bL;bL=_2.ofList(bK);_2.sortInPlace(bL);return _4.ofArray(bL);};_4.sortBy=function(bK,bL){return _4.sortWith(function(bM,bN){return bH.Compare(bK(bM),bK(bN));},bL);};_4.sortByDescending=function(bK,bL){return _4.sortWith(function(bM,bN){return-bH.Compare(bK(bM),bK(bN));},bL);};_4.sortDescending=function(bK){var bL;bL=_2.ofList(bK);_2.sortInPlaceByDescending(y,bL);return _4.ofArray(bL);};_4.sortWith=function(bK,bL){var bM;bM=_2.ofList(bL);_2.sortInPlaceWith(bK,bM);return _4.ofArray(bM);};_4.tail=function(bK){return bK.$==1?bK.$1:_4.listEmpty();};_4.unzip=function(bK){var bL,bM,bN,bO;bL=[];bM=[];bN=W.Get(bK);try{while(bN.MoveNext()){bO=bN.Current();bL.push(bO[0]);bM.push(bO[1]);}}finally{if("Dispose"in bN)bN.Dispose();}return[_4.ofArray(bL.slice(0)),_4.ofArray(bM.slice(0))];};_4.unzip3=function(bK){var bL,bM,bN,bO,bP;bL=[];bM=[];bN=[];bO=W.Get(bK);try{while(bO.MoveNext()){bP=bO.Current();bL.push(bP[0]);bM.push(bP[1]);bN.push(bP[2]);}}finally{if("Dispose"in bO)bO.Dispose();}return[_4.ofArray(bL.slice(0)),_4.ofArray(bM.slice(0)),_4.ofArray(bN.slice(0))];};_4.zip=function(bK,bL){return _4.map2(function(bM,bN){return[bM,bN];},bK,bL);};_4.zip3=function(bK,bL,bM){return _4.map3(function(bN,bO,bP){return[bN,bO,bP];},bK,bL,bM);};_4.chunkBySize=function(bK,bL){return _4.map(_4.ofArray,_4.ofSeq(_3.chunkBySize(bK,bL)));};_4.compareWith=function(bK,bL,bM){return _3.compareWith(bK,bL,bM);};_4.countBy=function(bK,bL){return _4.ofArray(_2.countBy(bK,_2.ofList(bL)));};_4.distinct=function(bK){return _4.ofSeq(_3.distinct(bK));};_4.distinctBy=function(bK,bL){return _4.ofSeq(_3.distinctBy(bK,bL));};_4.splitInto=function(bK,bL){return _4.map(_4.ofArray,_4.ofArray(_2.splitInto(bK,_2.ofList(bL))));};_4.except=function(bK,bL){return _4.ofSeq(_3.except(bK,bL));};_4.tryFindBack=function(bK,bL){return _2.tryFindBack(bK,_2.ofList(bL));};_4.findBack=function(bK,bL){var bM;bM=_4.tryFindBack(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_4.findIndexBack=function(bK,bL){var bM;bM=_2.tryFindIndexBack(bK,_2.ofList(bL));return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_4.groupBy=function(bK,bL){var bM,bN;bM=_2.groupBy(bK,_2.ofList(bL));bN=function(bO,bP){return[bO,_4.ofArray(bP)];};_2.mapInPlace(function(bO){return bN(bO[0],bO[1]);},bM);return _4.ofArray(bM);};_4.last=function(bK){var bL,bM;bK.$==0?_4.listEmpty():null;bL=bK;bM=bL.$1;while(bM.$==1){bL=bM;bM=bL.$1;}return bL.$0;};_4.contains=function(bK,bL){var bM,bN;bM=false;bN=bL;while(!bM&&bN.$==1){bM=bH.Equals(bK,bN.$0);bN=bN.$1;}return bM;};_4.mapFold=function(bK,bL,bM){var bN;bN=_2.mapFold(bK,bL,_2.ofList(bM));return[_4.ofArray(bN[0]),bN[1]];};_4.mapFoldBack=function(bK,bL,bM){var bN;bN=_2.mapFoldBack(bK,_2.ofList(bL),bM);return[_4.ofArray(bN[0]),bN[1]];};_4.pairwise=function(bK){return _4.ofSeq(_3.pairwise(bK));};_4.indexed=function(bK){return _4.mapi(function(bL,bM){return[bL,bM];},bK);};_4.tryHead=function(bK){return bK.$==0?null:{$:1,$0:bK.$0};};_4.exactlyOne=function(bK){var bL;return bK.$==1&&(bK.$1.$==0&&(bL=bK.$0,true))?bL:bu.FailWith("The input does not have precisely one element.");};_4.unfold=function(bK,bL){return _4.ofSeq(_3.unfold(bK,bL));};_4.windowed=function(bK,bL){return _4.ofSeq(_3.map(_4.ofArray,_3.windowed(bK,bL)));};_4.splitAt=function(bK,bL){return[_4.ofSeq(_3.take(bK,bL)),_4.skip(bK,bL)];};_4.listEmpty=function(){return bu.FailWith("The input list was empty.");};_4.badLengths=function(){return bu.FailWith("The lists have different lengths.");};bt.getOrValue=function(bK,bL){return bK==null?bL:bK;};bt.get=function(bK){return bK==null?bu.FailWith("Nullable object must have a value."):bK;};bu.range=function(bK,bL){var bM;bM=1+bL-bK;return bM<=0?[]:_3.init(bM,function(bN){return bN+bK;});};bu.step=function(bK,bL,bM){var bN;bN=bu.Sign(bL);return _3.takeWhile(function(bO){return bN*(bM-bO)>=0;},_3.initInfinite(function(bO){return bK+bO*bL;}));};bu.KeyValue=function(bK){return[bK.K,bK.V];};bu.Truncate=function(bK){return bK<0?x.ceil(bK):x.floor(bK);};bu.Sign=function(bK){return bK===0?0:bK<0?-1:1;};bu.Pown=function(bK,bL){function bM(bN){var bO;return bN===1?bK:bN%2===0?(bO=bM(bN/2>>0),bO*bO):bK*bM(bN-1);}return bM(bL);};bu.InvalidArg=function(bK,bL){throw new bh.New(bK,bL);};bu.InvalidOp=function(bK){throw new bj.New$1(bK);};bu.FailWith=function(bK){throw q(bK);};bv.string=function(bK,bL,bM){return bL==null?bM!=null&&bM.$==1?bK.slice(0,bM.$0+1):"":bM==null?bK.slice(bL.$0):bK.slice(bL.$0,bM.$0+1);};bv.array=function(bK,bL,bM){return bL==null?bM!=null&&bM.$==1?bK.slice(0,bM.$0+1):[]:bM==null?bK.slice(bL.$0):bK.slice(bL.$0,bM.$0+1);};bv.setArray=function(bK,bL,bM,bN){var bO;bO=bL!=null&&bL.$==1?bL.$0:0;_2.setSub(bK,bO,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bO+1,bN);};bv.array2D=function(bK,bL,bM,bN,bO){var bP,bQ;bP=bL!=null&&bL.$==1?bL.$0:0;bQ=bN!=null&&bN.$==1?bN.$0:0;return _2.sub2D(bK,bP,bQ,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bP+1,(bO!=null&&bO.$==1?bO.$0:(bK.length?bK[0].length:0)-1)-bQ+1);};bv.array2Dfix1=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT;bO=bM!=null&&bM.$==1?bM.$0:0;bP=bN!=null&&bN.$==1?bN.$0:(bK.length?bK[0].length:0)-1;bQ=bP-bO+1;bR=new m(bQ);for(bS=0,bT=bQ-1;bS<=bT;bS++)_2.set(bR,bS,_2.get2D(bK,bL,bO+bS));return bR;};bv.array2Dfix2=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT;bO=bL!=null&&bL.$==1?bL.$0:0;bP=bM!=null&&bM.$==1?bM.$0:bK.length-1;bQ=bP-bO+1;bR=new m(bQ);for(bS=0,bT=bQ-1;bS<=bT;bS++)_2.set(bR,bS,_2.get2D(bK,bO+bS,bN));return bR;};bv.setArray2Dfix1=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS;bP=bM!=null&&bM.$==1?bM.$0:0;bQ=bN!=null&&bN.$==1?bN.$0:(bK.length?bK[0].length:0)-1;for(bR=0,bS=bQ-bP+1-1;bR<=bS;bR++)_2.set2D(bK,bL,bP+bR,_2.get(bO,bR));};bv.setArray2Dfix2=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS;bP=bL!=null&&bL.$==1?bL.$0:0;bQ=bM!=null&&bM.$==1?bM.$0:bK.length-1;for(bR=0,bS=bQ-bP+1-1;bR<=bS;bR++)_2.set2D(bK,bP+bR,bN,_2.get(bO,bR));};bv.setArray2D=function(bK,bL,bM,bN,bO,bP){var bQ,bR;bQ=bL!=null&&bL.$==1?bL.$0:0;bR=bN!=null&&bN.$==1?bN.$0:0;_2.setSub2D(bK,bQ,bR,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bQ+1,(bO!=null&&bO.$==1?bO.$0:(bK.length?bK[0].length:0)-1)-bR+1,bP);};bw.filter=function(bK,bL){var bM;return bL!=null&&bL.$==1&&(bK(bL.$0)&&(bM=bL.$0,true))?bL:null;};bw.fold=function(bK,bL,bM){return bM==null?bL:bK(bL,bM.$0);};bw.foldBack=function(bK,bL,bM){return bL==null?bM:bK(bL.$0,bM);};bw.ofNullable=function(bK){return bK==null?null:{$:1,$0:bt.get(bK)};};bw.ofObj=function(bK){return bK==null?null:{$:1,$0:bK};};bw.toArray=function(bK){return bK==null?[]:[bK.$0];};bw.toList=function(bK){return bK==null?bs.Empty:_4.ofArray([bK.$0]);};bw.toNullable=function(bK){return bK!=null&&bK.$==1?bK.$0:null;};bw.toObj=function(bK){return bK==null?null:bK.$0;};bx.CopyTo=function(bK,bL,bM){_2.blit(bK,0,bL,bM,_2.length(bK));};bx.Contains=function(bK,bL){return _3.exists(function(bM){return bH.Equals(bL,bM);},bK);};bx.Clear=function(bK){bK.splice(0,_2.length(bK));};by=B.Random=bJ.Class({NextBytes:function(bK){var bL,bM;for(bL=0,bM=_2.length(bK)-1;bL<=bM;bL++)_2.set(bK,bL,x.floor(x.random()*256));},Next:function(bK,bL){return bK>bL?bu.FailWith("'minValue' cannot be greater than maxValue."):bK+x.floor(x.random()*(bL-bK));},Next$1:function(bK){return bK<0?bu.FailWith("'maxValue' must be greater than zero."):x.floor(x.random()*bK);},Next$2:function(){return x.floor(x.random()*2147483648);}},null,by);by.New=bJ.Ctor(function(){},by);bz.New=function(bK){return[bK];};bA.MapError=function(bK,bL){return bL.$==1?{$:1,$0:bK(bL.$0)}:{$:0,$0:bL.$0};};bA.Map=function(bK,bL){return bL.$==1?{$:1,$0:bL.$0}:{$:0,$0:bK(bL.$0)};};bA.Bind=function(bK,bL){return bL.$==1?{$:1,$0:bL.$0}:bK(bL.$0);};_3.enumFinally=function(bK,bL){return{GetEnumerator:function(){var bM;try{bM=W.Get(bK);}catch(bN){bL();throw bN;}return new X.New(null,null,function(bO){return bM.MoveNext()&&(bO.c=bM.Current(),true);},function(){bM.Dispose();bL();});}};};_3.enumUsing=function(bK,bL){return{GetEnumerator:function(){var bM;try{bM=W.Get(bL(bK));}catch(bN){bK.Dispose();throw bN;}return new X.New(null,null,function(bO){return bM.MoveNext()&&(bO.c=bM.Current(),true);},function(){bM.Dispose();bK.Dispose();});}};};_3.enumWhile=function(bK,bL){return{GetEnumerator:function(){return new X.New(null,null,function(bM){var bN;while(true){bN=bM.s;if(bH.Equals(bN,null)){if(bK()){bM.s=W.Get(bL);bM=bM;}else return false;}else{if(bN.MoveNext()){bM.c=bN.Current();return true;}else{bN.Dispose();bM.s=null;bM=bM;}}}},function(bM){var bN;bN=bM.s;!bH.Equals(bN,null)?bN.Dispose():void 0;});}};};bB.createEvent=function(bK,bL,bM){return{AddHandler:bK,RemoveHandler:bL,Subscribe:function(bN){var bO;bO=bM(function(){return function(bP){return bN.OnNext(bP);};});bK(bO);return{Dispose:function(){return bL(bO);}};}};};_3.append=function(bK,bL){return{GetEnumerator:function(){var bM;bM=[true];return new X.New(W.Get(bK),null,function(bN){var bO;return bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bO=bN.s,!bH.Equals(bO,null)?bO.Dispose():void 0,bN.s=null,bM[0]&&(bM[0]=false,bN.s=W.Get(bL),bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bN.s.Dispose(),bN.s=null,false)));},function(bN){var bO;bO=bN.s;!bH.Equals(bO,null)?bO.Dispose():void 0;});}};};_3.average=function(bK){var bL,bM;bL=_3.fold(function(bN,bO){return(function(bP){var bQ,bR;bQ=bP[0];bR=bP[1];return function(bS){return[bQ+1,bR+bS];};}(bN))(bO);},[0,0],bK);bM=bL[0];return bM===0?bu.InvalidArg("source","The input sequence was empty."):bL[1]/bM;};_3.averageBy=function(bK,bL){var bM,bN;bM=_3.fold(function(bO,bP){return(function(bQ){var bR,bS;bR=bQ[0];bS=bQ[1];return function(bT){return[bR+1,bS+bK(bT)];};}(bO))(bP);},[0,0],bL);bN=bM[0];return bN===0?bu.InvalidArg("source","The input sequence was empty."):bM[1]/bN;};_3.cache=function(bK){var bL,bM;bL=[];bM=[W.Get(bK)];return{GetEnumerator:function(){return new X.New(0,null,function(bN){var bO;return bN.s+1<bL.length?(bN.s=bN.s+1,bN.c=bL[bN.s],true):(bO=bM[0],bH.Equals(bO,null)?false:bO.MoveNext()?(bN.s=bN.s+1,bN.c=bO.Current(),bL.push(bN.c),true):(bO.Dispose(),bM[0]=null,false));},void 0);}};};_3.choose=function(bK,bL){return _3.collect(function(bM){var bN;bN=bK(bM);return bN==null?bs.Empty:_4.ofArray([bN.$0]);},bL);};_3.collect=function(bK,bL){return _3.concat(_3.map(bK,bL));};_3.compareWith=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=W.Get(bL);try{bP=W.Get(bM);try{bQ=0;bR=true;while(bR&&bQ===0)if(bN.MoveNext())bQ=bP.MoveNext()?bK(bN.Current(),bP.Current()):1;else if(bP.MoveNext())bQ=-1;else bR=false;bO=bQ;}finally{if("Dispose"in bP)bP.Dispose();}return bO;}finally{if("Dispose"in bN)bN.Dispose();}};_3.concat=function(bK){return{GetEnumerator:function(){var bL;bL=W.Get(bK);return new X.New(null,null,function(bM){var bN;while(true){bN=bM.s;if(bH.Equals(bN,null)){if(bL.MoveNext()){bM.s=W.Get(bL.Current());bM=bM;}else{bL.Dispose();return false;}}else{if(bN.MoveNext()){bM.c=bN.Current();return true;}else{bM.Dispose();bM.s=null;bM=bM;}}}},function(bM){var bN;bN=bM.s;!bH.Equals(bN,null)?bN.Dispose():void 0;!bH.Equals(bL,null)?bL.Dispose():void 0;});}};};_3.countBy=function(bK,bL){return _3.delay(function(){return _2.countBy(bK,_2.ofSeq(bL));});};_3.delay=function(bK){return{GetEnumerator:function(){return W.Get(bK());}};};_3.distinct=function(bK){return _3.distinctBy(y,bK);};_3.distinctBy=function(bK,bL){return{GetEnumerator:function(){var bM,bN;bM=W.Get(bL);bN=new bq.New$3();return new X.New(null,null,function(bO){var bP,bQ;if(bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bK(bP));while(!bQ&&bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bK(bP));}return bQ&&(bO.c=bP,true);}else return false;},function(){bM.Dispose();});}};};_3.splitInto=function(bK,bL){bK<=0?bu.FailWith("Count must be positive"):void 0;return _3.delay(function(){return _2.splitInto(bK,_2.ofSeq(bL));});};_3.exactlyOne=function(bK){var bL,bM;bL=W.Get(bK);try{return bL.MoveNext()?(bM=bL.Current(),bL.MoveNext()?bu.InvalidOp("Sequence contains more than one element"):bM):bu.InvalidOp("Sequence contains no elements");}finally{if("Dispose"in bL)bL.Dispose();}};_3.exists=function(bK,bL){var bM,bN;bM=W.Get(bL);try{bN=false;while(!bN&&bM.MoveNext())bN=bK(bM.Current());return bN;}finally{if("Dispose"in bM)bM.Dispose();}};_3.exists2=function(bK,bL,bM){var bN,bO,bP,bQ;bN=W.Get(bL);try{bP=W.Get(bM);try{bQ=false;while(!bQ&&bN.MoveNext()&&bP.MoveNext())bQ=bK(bN.Current(),bP.Current());bO=bQ;}finally{if("Dispose"in bP)bP.Dispose();}return bO;}finally{if("Dispose"in bN)bN.Dispose();}};_3.filter=function(bK,bL){return{GetEnumerator:function(){var bM;bM=W.Get(bL);return new X.New(null,null,function(bN){var bO,bP,bQ;bO=bM.MoveNext();bP=bM.Current();bQ=false;while(bO)if(bK(bP)){bN.c=bP;bQ=true;bO=false;}else if(bM.MoveNext())bP=bM.Current();else bO=false;return bQ;},function(){bM.Dispose();});}};};_3.find=function(bK,bL){var bM;bM=_3.tryFind(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_3.findIndex=function(bK,bL){var bM;bM=_3.tryFindIndex(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_3.fold=function(bK,bL,bM){var bN,bO;bN=bL;bO=W.Get(bM);try{while(bO.MoveNext())bN=bK(bN,bO.Current());return bN;}finally{if("Dispose"in bO)bO.Dispose();}};_3.forall=function(bK,bL){return!_3.exists(function(bM){return!bK(bM);},bL);};_3.forall2=function(bK,bL,bM){return!_3.exists2(function(bN,bO){return!bK(bN,bO);},bL,bM);};_3.groupBy=function(bK,bL){return _3.delay(function(){return _2.groupBy(bK,_2.ofSeq(bL));});};_3.head=function(bK){var bL;bL=W.Get(bK);try{return bL.MoveNext()?bL.Current():_3.insufficient();}finally{if("Dispose"in bL)bL.Dispose();}};_3.init=function(bK,bL){return _3.take(bK,_3.initInfinite(bL));};_3.initInfinite=function(bK){return{GetEnumerator:function(){return new X.New(0,null,function(bL){bL.c=bK(bL.s);bL.s=bL.s+1;return true;},void 0);}};};_3.isEmpty=function(bK){var bL;bL=W.Get(bK);try{return!bL.MoveNext();}finally{if("Dispose"in bL)bL.Dispose();}};_3.iter=function(bK,bL){var bM;bM=W.Get(bL);try{while(bM.MoveNext())bK(bM.Current());}finally{if("Dispose"in bM)bM.Dispose();}};_3.iter2=function(bK,bL,bM){var bN,bO,bP;bN=W.Get(bL);try{bP=W.Get(bM);try{while(bN.MoveNext()&&bP.MoveNext())bK(bN.Current(),bP.Current());bO=void 0;}finally{if("Dispose"in bP)bP.Dispose();}bO;}finally{if("Dispose"in bN)bN.Dispose();}};_3.iteri=function(bK,bL){var bM,bN;bM=0;bN=W.Get(bL);try{while(bN.MoveNext()){bK(bM,bN.Current());bM=bM+1;}}finally{if("Dispose"in bN)bN.Dispose();}};_3.length=function(bK){var bL,bM;bL=0;bM=W.Get(bK);try{while(bM.MoveNext())bL=bL+1;return bL;}finally{if("Dispose"in bM)bM.Dispose();}};_3.map=function(bK,bL){return{GetEnumerator:function(){var bM;bM=W.Get(bL);return new X.New(null,null,function(bN){return bM.MoveNext()&&(bN.c=bK(bM.Current()),true);},function(){bM.Dispose();});}};};_3.mapi=function(bK,bL){return _3.map2(bK,_3.initInfinite(y),bL);};_3.map2=function(bK,bL,bM){return{GetEnumerator:function(){var bN,bO;bN=W.Get(bL);bO=W.Get(bM);return new X.New(null,null,function(bP){return bN.MoveNext()&&bO.MoveNext()&&(bP.c=bK(bN.Current(),bO.Current()),true);},function(){bN.Dispose();bO.Dispose();});}};};_3.maxBy=function(bK,bL){return _3.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))>=0?bM:bN;},bL);};_3.minBy=function(bK,bL){return _3.reduce(function(bM,bN){return bH.Compare(bK(bM),bK(bN))<=0?bM:bN;},bL);};_3.max=function(bK){return _3.reduce(function(bL,bM){return bH.Compare(bL,bM)>=0?bL:bM;},bK);};_3.min=function(bK){return _3.reduce(function(bL,bM){return bH.Compare(bL,bM)<=0?bL:bM;},bK);};_3.nth=function(bK,bL){var bM,bN;if(bK<0)bu.FailWith("negative index requested");bM=-1;bN=W.Get(bL);try{while(bM<bK){!bN.MoveNext()?_3.insufficient():void 0;bM=bM+1;}return bN.Current();}finally{if("Dispose"in bN)bN.Dispose();}};_3.pairwise=function(bK){return _3.map(function(bL){return[_2.get(bL,0),_2.get(bL,1)];},_3.windowed(2,bK));};_3.pick=function(bK,bL){var bM;bM=_3.tryPick(bK,bL);return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_3.readOnly=function(bK){return{GetEnumerator:function(){return W.Get(bK);}};};_3.reduce=function(bK,bL){var bM,bN;bM=W.Get(bL);try{if(!bM.MoveNext())bu.FailWith("The input sequence was empty");bN=bM.Current();while(bM.MoveNext())bN=bK(bN,bM.Current());return bN;}finally{if("Dispose"in bM)bM.Dispose();}};_3.scan=function(bK,bL,bM){return{GetEnumerator:function(){var bN;bN=W.Get(bM);return new X.New(false,null,function(bO){return bO.s?bN.MoveNext()&&(bO.c=bK(bO.c,bN.Current()),true):(bO.c=bL,bO.s=true,true);},function(){bN.Dispose();});}};};_3.skip=function(bK,bL){return{GetEnumerator:function(){var bM;bM=W.Get(bL);return new X.New(true,null,function(bN){var bO,bP;if(bN.s){for(bO=1,bP=bK;bO<=bP;bO++)if(!bM.MoveNext())_3.insufficient();bN.s=false;}else null;return bM.MoveNext()&&(bN.c=bM.Current(),true);},function(){bM.Dispose();});}};};_3.skipWhile=function(bK,bL){return{GetEnumerator:function(){var bM;bM=W.Get(bL);return new X.New(true,null,function(bN){var bO,bP;if(bN.s){bO=true;bP=false;while(bO)if(bM.MoveNext()){if(!bK(bM.Current()))bO=false;}else{bO=false;bP=true;}bN.s=false;return bP?false:(bN.c=bM.Current(),true);}else return bM.MoveNext()&&(bN.c=bM.Current(),true);},function(){bM.Dispose();});}};};_3.sort=function(bK){return _3.sortBy(y,bK);};_3.sortBy=function(bK,bL){return _3.delay(function(){var bM;bM=_2.ofSeq(bL);_2.sortInPlaceBy(bK,bM);return bM;});};_3.sortByDescending=function(bK,bL){return _3.delay(function(){var bM;bM=_2.ofSeq(bL);_2.sortInPlaceByDescending(bK,bM);return bM;});};_3.sortDescending=function(bK){return _3.sortByDescending(y,bK);};_3.sum=function(bK){return _3.fold(function(bL,bM){return bL+bM;},0,bK);};_3.sumBy=function(bK,bL){return _3.fold(function(bM,bN){return bM+bK(bN);},0,bL);};_3.take=function(bK,bL){bK<0?_3.nonNegative():void 0;return{GetEnumerator:function(){var bM;bM=[W.Get(bL)];return new X.New(0,null,function(bN){var bO;bN.s=bN.s+1;return bN.s>bK?false:(bO=bM[0],bH.Equals(bO,null)?_3.insufficient():bO.MoveNext()?(bN.c=bO.Current(),bN.s===bK?(bO.Dispose(),bM[0]=null):void 0,true):(bO.Dispose(),bM[0]=null,_3.insufficient()));},function(){var bN;bN=bM[0];!bH.Equals(bN,null)?bN.Dispose():void 0;});}};};_3.takeWhile=function(bK,bL){return _3.delay(function(){return _3.enumUsing(W.Get(bL),function(bM){return _3.enumWhile(function(){return bM.MoveNext()&&bK(bM.Current());},_3.delay(function(){return[bM.Current()];}));});});};_3.truncate=function(bK,bL){return _3.delay(function(){return _3.enumUsing(W.Get(bL),function(bM){var bN;bN=[0];return _3.enumWhile(function(){return bM.MoveNext()&&bN[0]<bK;},_3.delay(function(){bN[0]++;return[bM.Current()];}));});});};_3.tryFind=function(bK,bL){var bM,bN,bO;bM=W.Get(bL);try{bN=null;while(bN==null&&bM.MoveNext()){bO=bM.Current();bK(bO)?bN={$:1,$0:bO}:void 0;}return bN;}finally{if("Dispose"in bM)bM.Dispose();}};_3.findBack=function(bK,bL){var bM;bM=_2.tryFindBack(bK,_2.ofSeq(bL));return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_3.tryFindIndex=function(bK,bL){var bM,bN,bO;bM=W.Get(bL);try{bN=true;bO=0;while(bN&&bM.MoveNext())if(bK(bM.Current()))bN=false;else bO=bO+1;return bN?null:{$:1,$0:bO};}finally{if("Dispose"in bM)bM.Dispose();}};_3.findIndexBack=function(bK,bL){var bM;bM=_2.tryFindIndexBack(bK,_2.ofSeq(bL));return bM==null?bu.FailWith("KeyNotFoundException"):bM.$0;};_3.tryPick=function(bK,bL){var bM,bN;bM=W.Get(bL);try{bN=null;while(bH.Equals(bN,null)&&bM.MoveNext())bN=bK(bM.Current());return bN;}finally{if("Dispose"in bM)bM.Dispose();}};_3.unfold=function(bK,bL){return{GetEnumerator:function(){return new X.New(bL,null,function(bM){var bN;bN=bK(bM.s);return bN==null?false:(bM.c=bN.$0[0],bM.s=bN.$0[1],true);},void 0);}};};_3.windowed=function(bK,bL){bK<=0?bu.FailWith("The input must be positive."):void 0;return _3.delay(function(){return _3.enumUsing(W.Get(bL),function(bM){var bN;bN=[];return _3.append(_3.enumWhile(function(){return bN.length<bK&&bM.MoveNext();},_3.delay(function(){bN.push(bM.Current());return[];})),_3.delay(function(){return bN.length===bK?_3.append([bN.slice(0)],_3.delay(function(){return _3.enumWhile(function(){return bM.MoveNext();},_3.delay(function(){bN.shift();bN.push(bM.Current());return[bN.slice(0)];}));})):[];}));});});};_3.zip=function(bK,bL){return _3.map2(function(bM,bN){return[bM,bN];},bK,bL);};_3.map3=function(bK,bL,bM,bN){return{GetEnumerator:function(){var bO,bP,bQ;bO=W.Get(bL);bP=W.Get(bM);bQ=W.Get(bN);return new X.New(null,null,function(bR){return bO.MoveNext()&&bP.MoveNext()&&bQ.MoveNext()&&(bR.c=bK(bO.Current(),bP.Current(),bQ.Current()),true);},function(){bO.Dispose();bP.Dispose();bQ.Dispose();});}};};_3.zip3=function(bK,bL,bM){return _3.map3(function(bN,bO,bP){return[bN,bO,bP];},bK,bL,bM);};_3.fold2=function(bK,bL,bM,bN){return _2.fold2(bK,bL,_2.ofSeq(bM),_2.ofSeq(bN));};_3.foldBack=function(bK,bL,bM){return _2.foldBack(bK,_2.ofSeq(bL),bM);};_3.foldBack2=function(bK,bL,bM,bN){return _2.foldBack2(bK,_2.ofSeq(bL),_2.ofSeq(bM),bN);};_3.iteri2=function(bK,bL,bM){var bN,bO,bP,bQ;bN=0;bO=W.Get(bL);try{bQ=W.Get(bM);try{while(bO.MoveNext()&&bQ.MoveNext()){bK(bN,bO.Current(),bQ.Current());bN=bN+1;}bP=void 0;}finally{if("Dispose"in bQ)bQ.Dispose();}bP;}finally{if("Dispose"in bO)bO.Dispose();}};_3.mapi2=function(bK,bL,bM){return _3.map3(function(bN,bO,bP){return((bK(bN))(bO))(bP);},_3.initInfinite(y),bL,bM);};_3.mapFold=function(bK,bL,bM){return _2.mapFold(bK,bL,_2.ofSeq(bM));};_3.mapFoldBack=function(bK,bL,bM){return _2.mapFoldBack(bK,_2.ofSeq(bL),bM);};_3.permute=function(bK,bL){return _3.delay(function(){return _2.permute(bK,_2.ofSeq(bL));});};_3.reduceBack=function(bK,bL){return _2.reduceBack(bK,_2.ofSeq(bL));};_3.replicate=function(bK,bL){bK<0?_3.nonNegative():void 0;return _3.delay(function(){return _3.map(function(){return bL;},bu.range(0,bK-1));});};_3.rev=function(bK){return _3.delay(function(){return _2.ofSeq(bK).slice().reverse();});};_3.scanBack=function(bK,bL,bM){return _3.delay(function(){return _2.scanBack(bK,_2.ofSeq(bL),bM);});};_3.indexed=function(bK){return _3.mapi(function(bL,bM){return[bL,bM];},bK);};_3.sortWith=function(bK,bL){return _3.delay(function(){var bM;bM=_2.ofSeq(bL);_2.sortInPlaceWith(bK,bM);return bM;});};_3.tail=function(bK){return _3.skip(1,bK);};bC.CopyTo=function(bK,bL,bM){_2.blit(bL,0,bL,bM,_2.length(bK));};bC.Contains=function(bK,bL){return _3.exists(function(bM){return bH.Equals(bL,bM);},bK);};bC.Clear=function(bK){bK.splice(0,_2.length(bK));};bD.RegexEscape=function(bK){return bK.replace(new p("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bD.SplitWith=function(bK,bL){return bK.split(bL);};bD.Join=function(bK,bL){return bL.join(bK);};bD.TrimEndWS=function(bK){return bK.replace(new p("\\s+$"),"");};bD.TrimStartWS=function(bK){return bK.replace(new p("^\\s+"),"");};bD.Trim=function(bK){return bK.replace(new p("^\\s+"),"").replace(new p("\\s+$"),"");};bD.StartsWith=function(bK,bL){return bK.substring(0,bL.length)==bL;};bD.Substring=function(bK,bL,bM){return bK.substr(bL,bM);};bD.ReplaceOnce=function(bK,bL,bM){return bK.replace(bL,bM);};bD.Remove=function(bK,bL,bM){return bK.substring(0,bL)+bK.substring(bL+bM);};bD.PadRightWith=function(bK,bL,bM){return bL>bK.length?bK+m(bL-bK.length+1).join(r.fromCharCode(bM)):bK;};bD.PadLeftWith=function(bK,bL,bM){return bL>bK.length?m(bL-bK.length+1).join(r.fromCharCode(bM))+bK:bK;};bD.LastIndexOf=function(bK,bL,bM){return bK.lastIndexOf(r.fromCharCode(bL),bM);};bD.IsNullOrWhiteSpace=function(bK){return bK==null||(new p("^\\s*$")).test(bK);};bD.IsNullOrEmpty=function(bK){return bK==null||bK=="";};bD.Insert=function(bK,bL,bM){return bK.substring(0,bL-1)+bM+bK.substring(bL);};bD.IndexOf=function(bK,bL,bM){return bK.indexOf(r.fromCharCode(bL),bM);};bD.EndsWith=function(bK,bL){return bK.substring(bK.length-bL.length)==bL;};bD.collect=function(bK,bL){return _2.init(bL.length,function(bM){return bK(bL.charCodeAt(bM));}).join("");};bD.concat=function(bK,bL){return _2.ofSeq(bL).join(bK);};bD.exists=function(bK,bL){return _3.exists(bK,bD.protect(bL));};bD.forall=function(bK,bL){return _3.forall(bK,bD.protect(bL));};bD.init=function(bK,bL){return _2.init(bK,bL).join("");};bD.iter=function(bK,bL){_3.iter(bK,bD.protect(bL));};bD.iteri=function(bK,bL){_3.iteri(bK,bD.protect(bL));};bD.length=function(bK){return bD.protect(bK).length;};bD.map=function(bK,bL){return bD.collect(function(bM){return r.fromCharCode(bK(bM));},bD.protect(bL));};bD.mapi=function(bK,bL){return _2.ofSeq(_3.mapi(function(bM,bN){return r.fromCharCode(bK(bM,bN));},bL)).join("");};bD.replicate=function(bK,bL){return bD.init(bK,function(){return bL;});};bD.protect=function(bK){return bK===null?"":bK;};bD.SFormat=function(bK,bL){return bK.replace(new p("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bM,bN,bO){var bP,bQ,bR;bP=r(_2.get(bL,+bN));return!bH.Equals(bO,void 0)?(bQ=+bO,(bR=x.abs(bQ),bR>bP.length?bQ>0?bD.PadLeft(bP,bR):bD.PadRight(bP,bR):bP)):bP;});};bD.Filter=function(bK,bL){return _2.ofSeq(_3.choose(function(bM){return bK(bM)?{$:1,$0:r.fromCharCode(bM)}:null;},bL)).join("");};bD.SplitStrings=function(bK,bL,bM){return bD.Split(bK,new p(bD.concat("|",_2.map(bD.RegexEscape,bL))),bM);};bD.SplitChars=function(bK,bL,bM){return bD.Split(bK,new p("["+bD.RegexEscape(r.fromCharCode.apply(void 0,bL))+"]"),bM);};bD.Split=function(bK,bL,bM){return bM===1?_2.filter(function(bN){return bN!=="";},bD.SplitWith(bK,bL)):bD.SplitWith(bK,bL);};bD.TrimEnd=function(bK,bL){var bM,bN;if(bH.Equals(bL,null)||bL.length==0)return bD.TrimEndWS(bK);else{bM=bK.length-1;bN=true;while(bM>=0&&bN)(function(){var bO;bO=bK.charCodeAt(bM);return _2.exists(function(bP){return bO===bP;},bL)?void(bM=bM-1):void(bN=false);}());return bD.Substring(bK,0,bM+1);}};bD.TrimStart=function(bK,bL){var bM,bN;if(bH.Equals(bL,null)||bL.length==0)return bD.TrimStartWS(bK);else{bM=0;bN=true;while(bM<bK.length&&bN)(function(){var bO;bO=bK.charCodeAt(bM);return _2.exists(function(bP){return bO===bP;},bL)?void(bM=bM+1):void(bN=false);}());return bK.substring(bM);}};bD.ToCharArrayRange=function(bK,bL,bM){return _2.init(bM,function(bN){return bK.charCodeAt(bL+bN);});};bD.ToCharArray=function(bK){return _2.init(bK.length,function(bL){return bK.charCodeAt(bL);});};bD.ReplaceChar=function(bK,bL,bM){return bD.Replace(bK,r.fromCharCode(bL),r.fromCharCode(bM));};bD.Replace=function(bK,bL,bM){function bN(bO){var bP,bQ,bR;bP=bO.indexOf(bL);return bP!==-1?(bQ=bD.ReplaceOnce(bO,bL,bM),(bR=bP+bM.length,bD.Substring(bQ,0,bP+bM.length)+bN(bQ.substring(bR)))):bO;}return bN(bK);};bD.PadRight=function(bK,bL){return bD.PadRightWith(bK,bL,32);};bD.PadLeft=function(bK,bL){return bD.PadLeftWith(bK,bL,32);};bD.CopyTo=function(bK,bL,bM,bN,bO){_2.blit(bD.ToCharArray(bK),bL,bM,bN,bO);};bD.Compare=function(bK,bL){return bH.Compare(bK,bL);};bE=B.Task=bJ.Class({Execute:function(){this.action();},Start:function(){var bK;bK=this;bH.Equals(this.status,0)?(this.status=2,T.scheduler().Fork(function(){var bL;bK.status=3;try{bK.Execute();bK.status=5;}catch(bM){bM instanceof bg&&(bH.Equals(bM.ct,bK.token)&&(bL=bM,true))?(i.log("Task cancellation caught:",bL),bK.exc=new bk.New$3([bL]),bK.status=6):(i.log("Task error caught:",bM),bK.exc=new bk.New$3([bM]),bK.status=7);}bK.RunContinuations();})):bu.InvalidOp("Task not in initial state");},StartContinuation:function(){var bK;bK=this;bH.Equals(this.status,1)?(this.status=2,T.scheduler().Fork(function(){if(bH.Equals(bK.status,2)){bK.status=3;try{bK.Execute();bK.status=5;}catch(bL){bK.exc=new bk.New$3([bL]);bK.status=7;}bK.RunContinuations();}})):void 0;},ContinueWith:function(bK,bL){var bM,bN;bM=this;bN=new bF.New(function(){return bK(bM);},bL,1,null,void 0);this.get_IsCompleted()?bN.StartContinuation():this.continuations.push(bN);return bN;},ContinueWith$1:function(bK,bL){var bM,bN;bM=this;bN=new bE.New$2(function(){return bK(bM);},bL,1,null);this.get_IsCompleted()?bN.StartContinuation():this.continuations.push(bN);return bN;},ContinueWith$2:function(bK){return this.ContinueWith$1(bK,T.noneCT());},RunContinuations:function(){var bK,bL,bM;bK=this.continuations;for(bL=0,bM=bK.length-1;bL<=bM;bL++)_2.get(bK,bL).StartContinuation();},OnCompleted:function(bK){if(this.get_IsCompleted())bK();else{bH.Equals(this.get_Status(),0)?this.Start():void 0;this.ContinueWith$2(function(){return bK();});}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bH.Equals(this.status,7);},get_IsCompleted:function(){return bH.Equals(this.status,5)||bH.Equals(this.status,7)||bH.Equals(this.status,6);},get_IsCanceled:function(){return bH.Equals(this.status,6);},get_Exception:function(){return this.exc;}},null,bE);bE.WhenAll=function(bK){var bL,bM,bN,bO,bP,bQ;bL=_2.length(bK);bM=[0];bN=new m(bL);bO=new bG.New();for(bP=0,bQ=bL-1;bP<=bQ;bP++)(function(bR){_2.get(bK,bP).ContinueWith$2(function(bS){return bS.get_IsFaulted()?void bO.TrySetException$1(bS.get_Exception()):bS.get_IsCanceled()?void bO.TrySetCanceled$1():(bM[0]++,bN[bR]=bS.get_Result(),bM[0]===bL?bO.SetResult(bN):null);});}(bP));return bO.get_Task();};bE.WhenAll$1=function(bK){var bL,bM,bN,bO,bP;bL=_2.length(bK);bM=[0];bN=new bG.New();for(bO=0,bP=bL-1;bO<=bP;bO++)_2.get(bK,bO).ContinueWith$2(function(bQ){return bQ.get_IsFaulted()?void bN.TrySetException$1(bQ.get_Exception()):bQ.get_IsCanceled()?void bN.TrySetCanceled$1():(bM[0]++,bM[0]===bL?void bN.TrySetResult():null);});return bN.get_Task();};bE.WhenAny=function(bK){var bL,bM,bN;bL=new bG.New();for(bM=0,bN=bK.length-1;bM<=bN;bM++)_2.get(bK,bM).ContinueWith(function(bO){bL.TrySetResult(bO);},T.noneCT());return bL.get_Task();};bE.WhenAny$1=function(bK){var bL,bM,bN;bL=new bG.New();for(bM=0,bN=bK.length-1;bM<=bN;bM++)_2.get(bK,bM).ContinueWith$2(function(bO){bL.TrySetResult(bO);});return bL.get_Task();};bE.Delay=function(bK,bL){return T.StartAsTask(T.Sleep(bK),{$:1,$0:bL});};bE.Delay$1=function(bK){return T.StartAsTask(T.Sleep(bK),null);};bE.Run=function(bK,bL){var bM;bM=bK();return bL.c?bE.FromCanceled(bL):(bH.Equals(bM.get_Status(),0)?bM.Start():void 0,bM);};bE.Run$1=function(bK,bL){var bM;bM=new bF.New(bK,bL,0,null,void 0);bM.Start();return bM;};bE.Run$2=function(bK,bL){var bM;bM=bK();return bL.c?bE.FromCanceled$1(bL):(bH.Equals(bM.get_Status(),0)?bM.Start():void 0,bM);};bE.Run$3=function(bK,bL){var bM;bM=new bE.New$2(bK,bL,0,null);bM.Start();return bM;};bE.FromResult=function(bK){return new bF.New(null,T.noneCT(),5,null,bK);};bE.FromException=function(bK){return new bF.New(null,T.noneCT(),7,new bk.New$3([bK]),null);};bE.FromException$1=function(bK){return new bE.New$2(null,T.noneCT(),7,new bk.New$3([bK]));};bE.FromCanceled=function(bK){return new bF.New(null,bK,6,null,null);};bE.FromCanceled$1=function(bK){return new bE.New$2(null,bK,6,null);};bE.New=bJ.Ctor(function(bK,bL){bE.New$2.call(this,bK,bL,0,null);},bE);bE.New$1=bJ.Ctor(function(bK){bE.New$2.call(this,bK,T.noneCT(),0,null);},bE);bE.New$2=bJ.Ctor(function(bK,bL,bM,bN){this.action=bK;this.token=bL;this.status=bM;this.continuations=[];this.exc=bN;},bE);bF=B.Task1=bJ.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},bE,bF);bF.New=bJ.Ctor(function(bK,bL,bM,bN,bO){bE.New$2.call(this,null,bL,bM,bN);this.func=bK;this.result=bO;},bF);bG=B.TaskCompletionSource=bJ.Class({TrySetResult:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bK,this.task.RunContinuations(),true);},TrySetException:function(bK){return this.TrySetException$1(new bk.New$2(bK));},TrySetException$1:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new bk.New$3([bK]),this.task.RunContinuations(),true);},TrySetCanceled:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bK){this.task.get_IsCompleted()?bu.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bK;this.task.RunContinuations();},SetException:function(bK){this.SetException$1(new bk.New$2(bK));},SetException$1:function(bK){this.task.get_IsCompleted()?bu.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new bk.New$3([bK]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?bu.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},null,bG);bG.New=bJ.Ctor(function(){this.task=new bF.New(null,T.noneCT(),1,null,void 0);},bG);bH.Hash=function(bK){var bL;bL=typeof bK;return bL=="function"?0:bL=="boolean"?bK?1:0:bL=="number"?bK:bL=="string"?bH.hashString(bK):bL=="object"?bK==null?0:bK instanceof m?bH.hashArray(bK):bH.hashObject(bK):0;};bH.hashObject=function(bK){var bL,bM;if("GetHashCode"in bK)return bK.GetHashCode();else{bL=[0];for(var bN in bK)if(function(bO){bL[0]=bH.hashMix(bH.hashMix(bL[0],bH.hashString(bO)),bH.Hash(bK[bO]));return false;}(bN))break;return bL[0];}};bH.hashString=function(bK){var bL,bM,bN;if(bK===null)return 0;else{bL=5381;for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL=bH.hashMix(bL,bK.charCodeAt(bM)<<0);return bL;}};bH.hashArray=function(bK){var bL,bM,bN;bL=-34948909;for(bM=0,bN=_2.length(bK)-1;bM<=bN;bM++)bL=bH.hashMix(bL,bH.Hash(_2.get(bK,bM)));return bL;};bH.hashMix=function(bK,bL){return(bK<<5)+bK+bL;};bH.Equals=function(bK,bL){var bM,bN,bO,bP;if(bK===bL)return true;else{bM=typeof bK;if(bM=="object"){if(bK===null||bK===void 0||bL===null||bL===void 0)return false;else if("Equals"in bK)return bK.Equals(bL);else if(bK instanceof m&&bL instanceof m)return bH.arrayEquals(bK,bL);else if(bK instanceof s&&bL instanceof s)return bH.dateEquals(bK,bL);else{bN=[true];for(var bQ in bK)if(function(bR){bN[0]=!bK.hasOwnProperty(bR)||bL.hasOwnProperty(bR)&&bH.Equals(bK[bR],bL[bR]);return!bN[0];}(bQ))break;if(bN[0]){for(var bR in bL)if(function(bS){bN[0]=!bL.hasOwnProperty(bS)||bK.hasOwnProperty(bS);return!bN[0];}(bR))break;}return bN[0];}}else return bM=="function"&&("$Func"in bK?bK.$Func===bL.$Func&&bK.$Target===bL.$Target:"$Invokes"in bK&&"$Invokes"in bL&&bH.arrayEquals(bK.$Invokes,bL.$Invokes));}};bH.dateEquals=function(bK,bL){return bK.getTime()===bL.getTime();};bH.arrayEquals=function(bK,bL){var bM,bN;if(_2.length(bK)===_2.length(bL)){bM=true;bN=0;while(bM&&bN<_2.length(bK)){!bH.Equals(_2.get(bK,bN),_2.get(bL,bN))?bM=false:void 0;bN=bN+1;}return bM;}else return false;};bH.Compare=function(bK,bL){var bM,bN,bO,bP,bQ,bR;if(bK===bL)return 0;else{bN=typeof bK;switch(bN=="function"?1:bN=="boolean"?2:bN=="number"?2:bN=="string"?2:bN=="object"?3:0){case 0:return typeof bL=="undefined"?0:-1;break;case 1:return bu.FailWith("Cannot compare function values.");break;case 2:return bK<bL?-1:1;break;case 3:if(bK===null)bO=-1;else if(bL===null)bO=1;else if("CompareTo"in bK)bO=bK.CompareTo(bL);else if("CompareTo0"in bK)bO=bK.CompareTo0(bL);else if(bK instanceof m&&bL instanceof m)bO=bH.compareArrays(bK,bL);else if(bK instanceof s&&bL instanceof s)bO=bH.compareDates(bK,bL);else{bP=[0];for(var bS in bK)if(function(bT){return!bK.hasOwnProperty(bT)?false:!bL.hasOwnProperty(bT)?(bP[0]=1,true):(bP[0]=bH.Compare(bK[bT],bL[bT]),bP[0]!==0);}(bS))break;if(bP[0]===0){for(var bT in bL)if(function(bU){return!bL.hasOwnProperty(bU)?false:!bK.hasOwnProperty(bU)&&(bP[0]=-1,true);}(bT))break;}bO=bP[0];}return bO;break;}}};bH.compareDates=function(bK,bL){return bH.Compare(bK.getTime(),bL.getTime());};bH.compareArrays=function(bK,bL){var bM,bN;if(_2.length(bK)<_2.length(bL))return -1;else if(_2.length(bK)>_2.length(bL))return 1;else{bM=0;bN=0;while(bM===0&&bN<_2.length(bK)){bM=bH.Compare(_2.get(bK,bN),_2.get(bL,bN));bN=bN+1;}return bM;}};bI.TryParse=function(bK,bL,bM,bN){var bO,bP;bO=+bK;bP=bO===bO-bO%1&&bO>=bL&&bO<=bM;bP?bN.set(bO):void 0;return bP;};bI.Parse=function(bK,bL,bM,bN){var bO;bO=+bK;if(bO!==bO-bO%1)throw new bm.New$1("Input string was not in a correct format.");else if(bO<bL||bO>bM)throw new bn.New$1(bN);else return bO;};bI.ParseByte=function(bK){return bI.Parse(bK,0,255,"Value was either too large or too small for an unsigned byte.");};bI.TryParseByte=function(bK,bL){return bI.TryParse(bK,0,255,bL);};bI.ParseSByte=function(bK){return bI.Parse(bK,-128,127,"Value was either too large or too small for a signed byte.");};bI.TryParseSByte=function(bK,bL){return bI.TryParse(bK,-128,127,bL);};bI.ParseInt16=function(bK){return bI.Parse(bK,-32768,32767,"Value was either too large or too small for an Int16.");};bI.TryParseInt16=function(bK,bL){return bI.TryParse(bK,-32768,32767,bL);};bI.ParseInt32=function(bK){return bI.Parse(bK,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bI.TryParseInt32=function(bK,bL){return bI.TryParse(bK,-2147483648,2147483647,bL);};bI.ParseUInt16=function(bK){return bI.Parse(bK,0,65535,"Value was either too large or too small for an UInt16.");};bI.TryParseUInt16=function(bK,bL){return bI.TryParse(bK,0,65535,bL);};bI.ParseUInt32=function(bK){return bI.Parse(bK,0,4294967295,"Value was either too large or too small for an UInt32.");};bI.TryParseUInt32=function(bK,bL){return bI.TryParse(bK,0,4294967295,bL);};bI.ParseInt64=function(bK){return bI.Parse(bK,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bI.TryParseInt64=function(bK,bL){return bI.TryParse(bK,-9223372036854775808,9223372036854775807,bL);};bI.ParseUInt64=function(bK){return bI.Parse(bK,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bI.TryParseUInt64=function(bK,bL){return bI.TryParse(bK,0,18446744073709551615,bL);};}());
