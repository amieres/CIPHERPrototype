(function(){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;var a=id,b=WebSharper,c=IntelliFactory,d=String;e=window.Rop=window.Rop||{};f=e.Option=e.Option||{};g=e.ExceptionThrown=e.ExceptionThrown||{};h=e.ErrOptionIsNone=e.ErrOptionIsNone||{};i=e.Result=e.Result||{};j=i.ropBuilder=i.ropBuilder||{};k=e.Wrap=e.Wrap||{};l=k.Builder=k.Builder||{};m=window.StartupCode$Common$Result=window.StartupCode$Common$Result||{};n=c&&c.Runtime;o=b&&b.PrintfHelpers;p=b&&b.List;q=b&&b.Strings;r=b&&b.Seq;s=b&&b.MatchFailureException;t=b&&b.Concurrency;f.modify=function(u){var v,w,x;v=function(y){return y==null?null:{$:1,$0:u(y.$0)};};w=(x=a,function(y){return f.defaultValue(x,y);});return function(y){return w(v(y));};};f.apply=function(u,v){var w;return u!=null&&u.$==1&&(v!=null&&v.$==1&&(w=[v.$0,u.$0],true))?{$:1,$0:w[0](w[1])}:null;};f.iterFO=function(u,v){if(u!=null&&u.$==1)if(v!=null&&v.$==1)v.$0(u.$0);};f.iterF=function(u,v){if(v!=null&&v.$==1)v.$0(u);};f.call=function(u,v){return v!=null&&v.$==1?{$:1,$0:v.$0(u)}:null;};f.defaultWith=function(u,v){return v==null?u():v.$0;};f.defaultValue=function(u,v){return v==null?u:v.$0;};g=e.ExceptionThrown=n.Class({Rop_ErrMsg$get_IsWarning:function(){return false;},Rop_ErrMsg$get_ErrMsg:function(){return(function(u){return function(v){return u(o.prettyPrint(v));};}(a))(this.exn);}},null,g);g.New=n.Ctor(function(u){this.exn=u;},g);h=e.ErrOptionIsNone=n.Class({Rop_ErrMsg$get_IsWarning:function(){return false;},Rop_ErrMsg$get_ErrMsg:function(){return"Option is None";}},null,h);h.New=n.Ctor(function(){},h);j=i.ropBuilder=n.Class({Combine:function(u,v){return(i.combine(u))(v);},Delay:function(u){return u();},Zero:function(){return i.succeed();},Using:function(u,v){try{return v(u);}finally{u.Dispose();}},Bind:function(u,v){return i.bind(function(w){return i.tryCall(v,w);},u);},ReturnFrom:a,Return:function(u){return i.succeed(u);}},null,j);j.New=n.Ctor(function(){},j);i.getMessages=function(u){var v,w;return u.$===0?"":(v=p.filter(function(x){return!x.Rop_ErrMsg$get_IsWarning();},u),(w=p.filter(function(x){return x.Rop_ErrMsg$get_IsWarning();},u),((((n.Curried(function(x,y,z,A){return x(d(y)+" errors, "+d(z)+" warnings\n"+o.toSafe(A));},4))(a))(v.get_Length()))(w.get_Length()))(q.concat("\n",p.map(function(x){return x.Rop_ErrMsg$get_ErrMsg();},u)))));};i.seqCheck=function(u){return r.exists(function(v){return i.Success(v).$==1&&true;},u)?i.failWithMsgs(r.pick(function(v){var w;w=i.Success(v);return w.$==1?{$:1,$0:w.$0}:null;},u)):i.succeed(r.map(function(v){var w;w=i.Success(v);if(w.$==0)return w.$0[0];else throw new s.New("Result.fs",190,56);},u));};i.withError=function(u,v){var w;w=v.$1;return f.defaultWith(function(){return u(w);},v.$0);};i.ifError=function(u,v){return f.defaultValue(u,v.$0);};i.failIfTrue=function(u,v){return v?i.fail(u):i.succeed();};i.failIfFalse=function(u,v){return v?i.succeed():i.fail(u);};i.tryProtection=function(){return i.succeed();};i.toOption=function(u){return u.$0;};i.fromOption=function(u,v){return v!=null&&v.$==1?i.succeed(v.$0):i.fail(u);};i.fromChoice=function(u,v){return v.$==1?i.fail(v.$0):i.succeed(v.$0);};i.result=function(){m.$cctor();return m.result;};i.tryCall=function(u,v){try{return u(v);}catch(w){return i.fail(i.failException(w));}};i.failException=function(u){return new g.New(u);};i.x=function(u){return i.Success(u).$==1?"No":"yes";};i.Success=function(u){return u.$0==null?{$:1,$0:u.$1}:{$:0,$0:[u.$0.$0,u.$1]};};i.apply=function(u,v){var w,x,y,z,A;w=u.$1;x=v.$1;y=u.$0;z=v.$0;return y!=null&&y.$==1&&(z!=null&&z.$==1&&(A=[y.$0,z.$0],true))?{$:0,$0:{$:1,$0:A[0](A[1])},$1:p.append(w,x)}:{$:0,$0:null,$1:p.append(w,x)};};i.bind=function(u,v){var w,x,y;w=v.$0;x=v.$1;return w==null?{$:0,$0:null,$1:x}:(y=u(w.$0),{$:0,$0:y.$0,$1:p.append(x,y.$1)});};i.combine=function(u){var v;v=u.$1;return function(w){return i.mergeMsgs(v,w);};};i.mergeMsgs=function(u,v){var w;w=i.mapMsgs(function(x){return p.append(u,x);},v);return{$:0,$0:w[0],$1:w[1]};};i.getMsgs=function(u){return u.$1;};i.getOption=function(u){return u.$0;};i.mapMsgs=function(u,v){return[v.$0,u(v.$1)];};i.mapMsg=function(u,v){return[v.$0,p.map(u,v.$1)];};i.map=function(u,v){var w;return{$:0,$0:(w=v.$0,w==null?null:{$:1,$0:u(w.$0)}),$1:v.$1};};i.failWithMsgs=function(u){return{$:0,$0:null,$1:u};};i.fail=function(u){return{$:0,$0:null,$1:p.ofArray([u])};};i.succeedWithMsgs=function(u,v){return{$:0,$0:{$:1,$0:u},$1:v};};i.succeedWithMsg=function(u,v){return{$:0,$0:{$:1,$0:u},$1:p.ofArray([v])};};i.succeed=function(u){return{$:0,$0:{$:1,$0:u},$1:p.T.Empty};};l=k.Builder=n.Class({Using:function(u,v){return{$:2,$0:t.Using(u,function(w){return k.wrapper2Async(v,w);})};},Combine:function(u,v){return k.combine(k.errOptionIsNone(),u,v);},Delay:function(u){return u();},ReturnFrom:a,Return:function(u){return{$:3,$0:u};},Zero:function(){return{$:3,$0:null};},Bind:function(u,v){return k.bind(v,{$:4,$0:u});},Bind$1:function(u,v){return k.bind(v,{$:0,$0:u});},Bind$2:function(u,v){return k.bind(v,{$:1,$0:u});},Bind$3:function(u,v){return k.bind(v,u);}},null,l);l.New=n.Ctor(function(){},l);k.getAsyncWithDefault=function(u,v){var w;w=null;return t.Delay(function(){return t.Bind(k.getAsyncR(v),function(x){return t.Return(i.withError(u,x));});});};k.getAsyncR=function(u){var v,w;return u.$==3?t.Return(i.succeed(u.$0)):u.$==4?t.Return(i.fromOption(k.errOptionIsNone(),u.$0)):u.$==0?t.Return(u.$0):u.$==2?u.$0:(v=u.$0,(w=null,t.Delay(function(){return t.Bind(v,function(x){return t.Return(i.succeed(x));});})));};k.getResult=function(u,v){if(v.$==4){if(v.$0==null)u(i.fail(k.errOptionIsNone()));else u(i.succeed(v.$0.$0));}else if(v.$==0)u(v.$0);else if(v.$==1)t.StartWithContinuations(v.$0,function(w){u(i.succeed(w));},function(w){u(i.fail(i.failException(w)));},function(w){u(i.fail(i.failException(w)));},null);else if(v.$==2)t.StartWithContinuations(v.$0,u,function(w){u(i.fail(i.failException(w)));},function(w){u(i.fail(i.failException(w)));},null);else u(i.succeed(v.$0));};k.wrapper=function(){m.$cctor();return m.wrapper;};k.combine=function(u,v,w){return v.$==4?v.$0==null?k.addMsgs(u,p.ofArray([u]),w):w:v.$==0?v.$0.$1.$==0?w:k.addMsgs(u,v.$0.$1,w):v.$==1?w:v.$==2?w:w;};k.addMsgs=function(u,v,w){var x,y,z;if(v.$===0)return w;else switch(w.$==4?w.$0==null?1:(x=w.$0.$0,0):w.$==0?(x=w.$0,2):w.$==1?(x=w.$0,3):w.$==2?(x=w.$0,4):(x=w.$0,0)){case 0:return{$:0,$0:i.succeedWithMsgs(x,v)};break;case 1:return{$:0,$0:i.mergeMsgs(v,i.fail(u))};break;case 2:return{$:0,$0:i.mergeMsgs(v,x)};break;case 3:return{$:2,$0:(y=null,t.Delay(function(){return t.Bind(x,function(A){return t.Return(i.succeedWithMsgs(A,v));});}))};break;case 4:return{$:2,$0:(z=null,t.Delay(function(){return t.Bind(x,function(A){return t.Return(i.mergeMsgs(v,A));});}))};break;}};k.wrapper2Async=function(u,v){var w,x,y,z;x=k.tryCall(u,v);switch(x.$==4?0:x.$==0?1:x.$==1?2:x.$==2?3:0){case 0:return k.wb2arb(p.T.Empty,x);break;case 1:return k.wb2arb(x.$0.$1,x);break;case 2:y=x.$0;z=null;return t.Delay(function(){return t.Bind(y,function(A){return t.Return(i.succeed(A));});});break;case 3:return x.$0;break;}};k.bind=function(u,v){var w,x,y,z,A;switch(v.$==4?v.$0==null?1:(w=v.$0.$0,0):v.$==0?(x=i.Success(v.$0),x.$==1?(w=x.$0,2):x.$0[1].$==0?(w=x.$0[0],0):(w=[x.$0[0],x.$0[1]],3)):v.$==1?(w=v.$0,4):v.$==2?(w=v.$0,5):(w=v.$0,0)){case 0:return k.tryCall(u,w);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:i.failWithMsgs(w)};break;case 3:y=w[1];return function(B){var C,D,E,F;switch(B.$==3?(C=B.$0,0):B.$==0?(D=i.Success(B.$0),D.$==1?(C=D.$0,2):D.$0[1].$==0?(C=D.$0[0],0):(C=[D.$0[0],D.$0[1]],1)):B.$==1?(C=B.$0,3):B.$==2?(C=B.$0,4):5){case 0:return{$:0,$0:i.succeedWithMsgs(C,y)};break;case 1:return{$:0,$0:i.succeedWithMsgs(C[0],p.append(y,C[1]))};break;case 2:return{$:0,$0:i.failWithMsgs(p.append(y,C))};break;case 3:return{$:2,$0:(E=null,t.Delay(function(){return t.Bind(C,function(G){return t.Return(i.succeedWithMsgs(G,y));});}))};break;case 4:return{$:2,$0:(F=null,t.Delay(function(){return t.Bind(C,function(G){return t.Return(i.mergeMsgs(y,G));});}))};break;case 5:throw new s.New("Result.fs",238,40);return;break;}}(k.tryCall(u,w[0]));break;case 4:return{$:2,$0:(z=null,t.Delay(function(){return t.Bind(w,function(B){return k.wb2arb(p.T.Empty,k.tryCall(u,B));});}))};break;case 5:return{$:2,$0:(A=null,t.Delay(function(){return t.Bind(w,function(B){var C,D,E;C=i.Success(B);return C.$==1?(D=C.$0,E=null,t.Delay(function(){return t.Return(i.failWithMsgs(D));})):k.wb2arb(C.$0[1],k.tryCall(u,C.$0[0]));});}))};break;}};k.tryCall=function(u,v){try{return u(v);}catch(w){return{$:0,$0:i.fail(i.failException(w))};}};k.wb2arb=function(u,v){var w,x,y,z,A,B;switch(v.$==2?(w=v.$0,1):v.$==0?(w=v.$0,2):v.$==3?(w=v.$0,3):v.$==4?v.$0==null?4:(w=v.$0.$0,3):(w=v.$0,0)){case 0:x=null;return t.Delay(function(){return t.Bind(w,function(C){return t.Return(i.succeedWithMsgs(C,u));});});break;case 1:y=null;return t.Delay(function(){return t.Bind(w,function(C){return t.Return(i.mergeMsgs(u,C));});});break;case 2:z=null;return t.Delay(function(){return t.Return(i.mergeMsgs(u,w));});break;case 3:A=null;return t.Delay(function(){return t.Return(i.succeedWithMsgs(w,u));});break;case 4:B=null;return t.Delay(function(){return t.Return(i.failWithMsgs(new p.T({$:1,$0:k.errOptionIsNone(),$1:u})));});break;}};k.errOptionIsNone=function(){m.$cctor();return m.errOptionIsNone;};m.$cctor=n.Cctor(function(){m.result=new j.New();m.errOptionIsNone=new h.New();m.wrapper=new l.New();m.$cctor=window.ignore;});}());
