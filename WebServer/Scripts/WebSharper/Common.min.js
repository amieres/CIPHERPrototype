(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;a=window.Rop=window.Rop||{};b=a.Option=a.Option||{};c=a.ExceptionThrown=a.ExceptionThrown||{};d=a.ErrOptionIsNone=a.ErrOptionIsNone||{};e=a.Result=a.Result||{};f=e.ropBuilder=e.ropBuilder||{};g=a.Wrap=a.Wrap||{};h=g.Builder=g.Builder||{};i=window.StartupCode$Common$Result=window.StartupCode$Common$Result||{};j=window.IntelliFactory;k=j&&j.Runtime;l=window.WebSharper;m=l&&l.PrintfHelpers;n=l&&l.List;o=l&&l.Strings;p=l&&l.Seq;q=l&&l.MatchFailureException;r=l&&l.Concurrency;b.modify=function(s){var t,u,v;t=function(w){return w==null?null:{$:1,$0:s(w.$0)};};u=(v=window.id,function(w){return b.defaultValue(v,w);});return function(w){return u(t(w));};};b.apply=function(s,t){var u;return s!=null&&s.$==1&&(t!=null&&t.$==1&&(u=[t.$0,s.$0],true))?{$:1,$0:u[0](u[1])}:null;};b.iterFO=function(s,t){if(s!=null&&s.$==1)if(t!=null&&t.$==1)t.$0(s.$0);};b.iterF=function(s,t){if(t!=null&&t.$==1)t.$0(s);};b.call=function(s,t){return t!=null&&t.$==1?{$:1,$0:t.$0(s)}:null;};b.defaultWith=function(s,t){return t==null?s():t.$0;};b.defaultValue=function(s,t){return t==null?s:t.$0;};c=a.ExceptionThrown=k.Class({Rop_ErrMsg$get_IsWarning:function(){return false;},Rop_ErrMsg$get_ErrMsg:function(){return(function(s){return function(t){return s(m.prettyPrint(t));};}(window.id))(this.exn);}},null,c);c.New=k.Ctor(function(s){this.exn=s;},c);d=a.ErrOptionIsNone=k.Class({Rop_ErrMsg$get_IsWarning:function(){return false;},Rop_ErrMsg$get_ErrMsg:function(){return"Option is None";}},null,d);d.New=k.Ctor(function(){},d);f=e.ropBuilder=k.Class({Combine:function(s,t){return(e.combine(s))(t);},Delay:function(s){return s();},Zero:function(){return e.succeed();},Using:function(s,t){try{return t(s);}finally{s.Dispose();}},Bind:function(s,t){return e.bind(function(u){return e.tryCall(t,u);},s);},ReturnFrom:window.id,Return:function(s){return e.succeed(s);}},null,f);f.New=k.Ctor(function(){},f);e.getMessages=function(s){var t,u;return s.$===0?"":(t=n.filter(function(v){return!v.Rop_ErrMsg$get_IsWarning();},s),(u=n.filter(function(v){return v.Rop_ErrMsg$get_IsWarning();},s),((((k.Curried(function(v,w,x,y){return v(window.String(w)+" errors, "+window.String(x)+" warnings\n"+m.toSafe(y));},4))(window.id))(t.get_Length()))(u.get_Length()))(o.concat("\n",n.map(function(v){return v.Rop_ErrMsg$get_ErrMsg();},s)))));};e.seqCheck=function(s){return p.exists(function(t){return e.Success(t).$==1&&true;},s)?e.failWithMsgs(p.pick(function(t){var u;u=e.Success(t);return u.$==1?{$:1,$0:u.$0}:null;},s)):e.succeed(p.map(function(t){var u;u=e.Success(t);if(u.$==0)return u.$0[0];else throw new q.New("Result.fs",190,56);},s));};e.withError=function(s,t){var u;u=t.$1;return b.defaultWith(function(){return s(u);},t.$0);};e.ifError=function(s,t){return b.defaultValue(s,t.$0);};e.failIfTrue=function(s,t){return t?e.fail(s):e.succeed();};e.failIfFalse=function(s,t){return t?e.succeed():e.fail(s);};e.tryProtection=function(){return e.succeed();};e.toOption=function(s){return s.$0;};e.fromOption=function(s,t){return t!=null&&t.$==1?e.succeed(t.$0):e.fail(s);};e.fromChoice=function(s,t){return t.$==1?e.fail(t.$0):e.succeed(t.$0);};e.result=function(){i.$cctor();return i.result;};e.tryCall=function(s,t){try{return s(t);}catch(u){return e.fail(e.failException(u));}};e.failException=function(s){return new c.New(s);};e.x=function(s){return e.Success(s).$==1?"No":"yes";};e.Success=function(s){return s.$0==null?{$:1,$0:s.$1}:{$:0,$0:[s.$0.$0,s.$1]};};e.apply=function(s,t){var u,v,w,x,y;u=s.$1;v=t.$1;w=s.$0;x=t.$0;return w!=null&&w.$==1&&(x!=null&&x.$==1&&(y=[w.$0,x.$0],true))?{$:0,$0:{$:1,$0:y[0](y[1])},$1:n.append(u,v)}:{$:0,$0:null,$1:n.append(u,v)};};e.bind=function(s,t){var u,v,w;u=t.$0;v=t.$1;return u==null?{$:0,$0:null,$1:v}:(w=s(u.$0),{$:0,$0:w.$0,$1:n.append(v,w.$1)});};e.combine=function(s){var t;t=s.$1;return function(u){return e.mergeMsgs(t,u);};};e.mergeMsgs=function(s,t){var u;u=e.mapMsgs(function(v){return n.append(s,v);},t);return{$:0,$0:u[0],$1:u[1]};};e.getMsgs=function(s){return s.$1;};e.getOption=function(s){return s.$0;};e.mapMsgs=function(s,t){return[t.$0,s(t.$1)];};e.mapMsg=function(s,t){return[t.$0,n.map(s,t.$1)];};e.map=function(s,t){var u;return{$:0,$0:(u=t.$0,u==null?null:{$:1,$0:s(u.$0)}),$1:t.$1};};e.failWithMsgs=function(s){return{$:0,$0:null,$1:s};};e.fail=function(s){return{$:0,$0:null,$1:n.ofArray([s])};};e.succeedWithMsgs=function(s,t){return{$:0,$0:{$:1,$0:s},$1:t};};e.succeedWithMsg=function(s,t){return{$:0,$0:{$:1,$0:s},$1:n.ofArray([t])};};e.succeed=function(s){return{$:0,$0:{$:1,$0:s},$1:n.T.Empty};};g.StartAsTask=function(s,t,u){return r.StartAsTask(g.getAsyncR(s),u);};g.Start=function(s,t){r.Start(g.getAsync(s),t);};h=g.Builder=k.Class({Using:function(s,t){return{$:2,$0:r.Using(s,function(u){return g.wrapper2Async(t,u);})};},Combine:function(s,t){return g.combine(g.errOptionIsNone(),s,t);},Delay:function(s){return s();},ReturnFrom:window.id,Return:function(s){return{$:3,$0:s};},Zero:function(){return{$:3,$0:null};},Bind:function(s,t){return g.bind(t,{$:4,$0:s});},Bind$1:function(s,t){return g.bind(t,{$:0,$0:s});},Bind$2:function(s,t){return g.bind(t,{$:1,$0:s});},Bind$3:function(s,t){return g.bind(t,s);}},null,h);h.New=k.Ctor(function(){},h);g.getAsync=function(s){var t,u,v,w,x,y;return s.$==3?r.Return(s.$0):s.$==4?(t=s.$0,(u=null,r.Delay(function(){var z,A;if(t==null)throw window.Error(e.getMessages(n.ofArray([g.errOptionIsNone()])));else A=t.$0;return r.Return(A);}))):s.$==0?(v=s.$0,(w=null,r.Delay(function(){var z,A,B;B=e.Success(v);if(B.$==1)throw window.Error(e.getMessages(B.$0));else A=B.$0[0];return r.Return(A);}))):s.$==2?(x=s.$0,(y=null,r.Delay(function(){return r.Bind(x,function(z){var A,B,C;C=e.Success(z);if(C.$==1)throw window.Error(e.getMessages(C.$0));else B=C.$0[0];return r.Return(B);});}))):s.$0;};g.getAsyncWithDefault=function(s,t){var u;u=null;return r.Delay(function(){return r.Bind(g.getAsyncR(t),function(v){return r.Return(e.withError(s,v));});});};g.getAsyncR=function(s){var t,u;return s.$==3?r.Return(e.succeed(s.$0)):s.$==4?r.Return(e.fromOption(g.errOptionIsNone(),s.$0)):s.$==0?r.Return(s.$0):s.$==2?s.$0:(t=s.$0,(u=null,r.Delay(function(){return r.Bind(t,function(v){return r.Return(e.succeed(v));});})));};g.getResult=function(s,t){if(t.$==4){if(t.$0==null)s(e.fail(g.errOptionIsNone()));else s(e.succeed(t.$0.$0));}else if(t.$==0)s(t.$0);else if(t.$==1)r.StartWithContinuations(t.$0,function(u){s(e.succeed(u));},function(u){s(e.fail(e.failException(u)));},function(u){s(e.fail(e.failException(u)));},null);else if(t.$==2)r.StartWithContinuations(t.$0,s,function(u){s(e.fail(e.failException(u)));},function(u){s(e.fail(e.failException(u)));},null);else s(e.succeed(t.$0));};g.wrapper=function(){i.$cctor();return i.wrapper;};g.combine=function(s,t,u){return t.$==4?t.$0==null?g.addMsgs(s,n.ofArray([s]),u):u:t.$==0?t.$0.$1.$==0?u:g.addMsgs(s,t.$0.$1,u):t.$==1?u:t.$==2?u:u;};g.addMsgs=function(s,t,u){var v,w,x;if(t.$===0)return u;else switch(u.$==4?u.$0==null?1:(v=u.$0.$0,0):u.$==0?(v=u.$0,2):u.$==1?(v=u.$0,3):u.$==2?(v=u.$0,4):(v=u.$0,0)){case 0:return{$:0,$0:e.succeedWithMsgs(v,t)};break;case 1:return{$:0,$0:e.mergeMsgs(t,e.fail(s))};break;case 2:return{$:0,$0:e.mergeMsgs(t,v)};break;case 3:return{$:2,$0:(w=null,r.Delay(function(){return r.Bind(v,function(y){return r.Return(e.succeedWithMsgs(y,t));});}))};break;case 4:return{$:2,$0:(x=null,r.Delay(function(){return r.Bind(v,function(y){return r.Return(e.mergeMsgs(t,y));});}))};break;}};g.wrapper2Async=function(s,t){var u,v,w,x;v=g.tryCall(s,t);switch(v.$==4?0:v.$==0?1:v.$==1?2:v.$==2?3:0){case 0:return g.wb2arb(n.T.Empty,v);break;case 1:return g.wb2arb(v.$0.$1,v);break;case 2:w=v.$0;x=null;return r.Delay(function(){return r.Bind(w,function(y){return r.Return(e.succeed(y));});});break;case 3:return v.$0;break;}};g.bind=function(s,t){var u,v,w,x,y;switch(t.$==4?t.$0==null?1:(u=t.$0.$0,0):t.$==0?(v=e.Success(t.$0),v.$==1?(u=v.$0,2):v.$0[1].$==0?(u=v.$0[0],0):(u=[v.$0[0],v.$0[1]],3)):t.$==1?(u=t.$0,4):t.$==2?(u=t.$0,5):(u=t.$0,0)){case 0:return g.tryCall(s,u);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:e.failWithMsgs(u)};break;case 3:w=u[1];return function(z){var A,B,C,D;switch(z.$==3?(A=z.$0,0):z.$==0?(B=e.Success(z.$0),B.$==1?(A=B.$0,2):B.$0[1].$==0?(A=B.$0[0],0):(A=[B.$0[0],B.$0[1]],1)):z.$==1?(A=z.$0,3):z.$==2?(A=z.$0,4):5){case 0:return{$:0,$0:e.succeedWithMsgs(A,w)};break;case 1:return{$:0,$0:e.succeedWithMsgs(A[0],n.append(w,A[1]))};break;case 2:return{$:0,$0:e.failWithMsgs(n.append(w,A))};break;case 3:return{$:2,$0:(C=null,r.Delay(function(){return r.Bind(A,function(E){return r.Return(e.succeedWithMsgs(E,w));});}))};break;case 4:return{$:2,$0:(D=null,r.Delay(function(){return r.Bind(A,function(E){return r.Return(e.mergeMsgs(w,E));});}))};break;case 5:throw new q.New("Result.fs",238,40);return;break;}}(g.tryCall(s,u[0]));break;case 4:return{$:2,$0:(x=null,r.Delay(function(){return r.Bind(u,function(z){return g.wb2arb(n.T.Empty,g.tryCall(s,z));});}))};break;case 5:return{$:2,$0:(y=null,r.Delay(function(){return r.Bind(u,function(z){var A,B,C;A=e.Success(z);return A.$==1?(B=A.$0,C=null,r.Delay(function(){return r.Return(e.failWithMsgs(B));})):g.wb2arb(A.$0[1],g.tryCall(s,A.$0[0]));});}))};break;}};g.tryCall=function(s,t){try{return s(t);}catch(u){return{$:0,$0:e.fail(e.failException(u))};}};g.wb2arb=function(s,t){var u,v,w,x,y,z;switch(t.$==2?(u=t.$0,1):t.$==0?(u=t.$0,2):t.$==3?(u=t.$0,3):t.$==4?t.$0==null?4:(u=t.$0.$0,3):(u=t.$0,0)){case 0:v=null;return r.Delay(function(){return r.Bind(u,function(A){return r.Return(e.succeedWithMsgs(A,s));});});break;case 1:w=null;return r.Delay(function(){return r.Bind(u,function(A){return r.Return(e.mergeMsgs(s,A));});});break;case 2:x=null;return r.Delay(function(){return r.Return(e.mergeMsgs(s,u));});break;case 3:y=null;return r.Delay(function(){return r.Return(e.succeedWithMsgs(u,s));});break;case 4:z=null;return r.Delay(function(){return r.Return(e.failWithMsgs(new n.T({$:1,$0:g.errOptionIsNone(),$1:s})));});break;}};g.errOptionIsNone=function(){i.$cctor();return i.errOptionIsNone;};i.$cctor=k.Cctor(function(){i.result=new f.New();i.errOptionIsNone=new d.New();i.wrapper=new h.New();i.$cctor=window.ignore;});}());
